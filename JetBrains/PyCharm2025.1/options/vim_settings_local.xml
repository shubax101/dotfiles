<application>
  <component name="VimHistorySettings">
    <history>
      <history-cmd>
        <entry encoding="base64">c291cmNlIH4uL2lkZWF2aW1yYw==</entry>
        <entry encoding="base64">Vw==</entry>
        <entry encoding="base64">JzwsJz53</entry>
        <entry encoding="base64">dw==</entry>
      </history-cmd>
      <history-search>
        <entry encoding="base64" />
      </history-search>
    </history>
  </component>
  <component name="VimJumpsSettings">
    <project id="PwCpTxtExtractor-bfcbb0d5">
      <jump line="498" column="33" filename="$USER_HOME$/programming/Python/PwCpTxtExtractor/main.py" protocol="file" />
      <jump line="496" column="22" filename="$USER_HOME$/programming/Python/PwCpTxtExtractor/main.py" protocol="file" />
      <jump line="491" column="14" filename="$USER_HOME$/programming/Python/PwCpTxtExtractor/main.py" protocol="file" />
      <jump line="483" column="18" filename="$USER_HOME$/programming/Python/PwCpTxtExtractor/main.py" protocol="file" />
      <jump line="482" column="45" filename="$USER_HOME$/programming/Python/PwCpTxtExtractor/main.py" protocol="file" />
      <jump line="497" column="18" filename="$USER_HOME$/programming/Python/PwCpTxtExtractor/main.py" protocol="file" />
      <jump line="455" column="93" filename="$USER_HOME$/programming/Python/PwCpTxtExtractor/main.py" protocol="file" />
      <jump line="451" column="69" filename="$USER_HOME$/programming/Python/PwCpTxtExtractor/main.py" protocol="file" />
      <jump line="468" column="62" filename="$USER_HOME$/programming/Python/PwCpTxtExtractor/main.py" protocol="file" />
      <jump line="448" column="49" filename="$USER_HOME$/programming/Python/PwCpTxtExtractor/main.py" protocol="file" />
      <jump line="445" column="47" filename="$USER_HOME$/programming/Python/PwCpTxtExtractor/main.py" protocol="file" />
      <jump line="439" column="46" filename="$USER_HOME$/programming/Python/PwCpTxtExtractor/main.py" protocol="file" />
      <jump line="452" column="61" filename="$USER_HOME$/programming/Python/PwCpTxtExtractor/main.py" protocol="file" />
      <jump line="502" column="18" filename="$USER_HOME$/programming/Python/PwCpTxtExtractor/main.py" protocol="file" />
      <jump line="463" column="87" filename="$USER_HOME$/programming/Python/PwCpTxtExtractor/main.py" protocol="file" />
      <jump line="484" column="4" filename="$USER_HOME$/programming/Python/PwCpTxtExtractor/main.py" protocol="file" />
      <jump line="444" column="0" filename="$USER_HOME$/programming/Python/PwCpTxtExtractor/main.py" protocol="file" />
      <jump line="97" column="0" filename="$USER_HOME$/programming/Python/Cp-Extractor/venv/lib/python3.12/site-packages/pyromod/listen/message_handler.py" protocol="file" />
      <jump line="458" column="85" filename="$USER_HOME$/programming/Python/PwCpTxtExtractor/main.py" protocol="file" />
      <jump line="462" column="70" filename="$USER_HOME$/programming/Python/PwCpTxtExtractor/main.py" protocol="file" />
      <jump line="461" column="64" filename="$USER_HOME$/programming/Python/PwCpTxtExtractor/main.py" protocol="file" />
      <jump line="460" column="72" filename="$USER_HOME$/programming/Python/PwCpTxtExtractor/main.py" protocol="file" />
      <jump line="456" column="61" filename="$USER_HOME$/programming/Python/PwCpTxtExtractor/main.py" protocol="file" />
      <jump line="495" column="23" filename="$USER_HOME$/programming/Python/PwCpTxtExtractor/main.py" protocol="file" />
      <jump line="473" column="0" filename="$USER_HOME$/programming/Python/PwCpTxtExtractor/main.py" protocol="file" />
      <jump line="459" column="64" filename="$USER_HOME$/programming/Python/PwCpTxtExtractor/main.py" protocol="file" />
      <jump line="454" column="59" filename="$USER_HOME$/programming/Python/PwCpTxtExtractor/main.py" protocol="file" />
      <jump line="474" column="45" filename="$USER_HOME$/programming/Python/PwCpTxtExtractor/main.py" protocol="file" />
      <jump line="457" column="69" filename="$USER_HOME$/programming/Python/PwCpTxtExtractor/main.py" protocol="file" />
      <jump line="8" column="14" filename="$USER_HOME$/programming/Python/PwCpTxtExtractor/config.py" protocol="file" />
      <jump line="521" column="16" filename="$USER_HOME$/programming/Python/PwCpTxtExtractor/main.py" protocol="file" />
      <jump line="100" column="36" filename="$USER_HOME$/programming/Python/PwCpTxtExtractor/main.py" protocol="file" />
      <jump line="518" column="20" filename="$USER_HOME$/programming/Python/PwCpTxtExtractor/main.py" protocol="file" />
      <jump line="511" column="26" filename="$USER_HOME$/programming/Python/PwCpTxtExtractor/main.py" protocol="file" />
      <jump line="503" column="0" filename="$USER_HOME$/programming/Python/PwCpTxtExtractor/main.py" protocol="file" />
      <jump line="516" column="0" filename="$USER_HOME$/programming/Python/PwCpTxtExtractor/main.py" protocol="file" />
      <jump line="528" column="31" filename="$USER_HOME$/programming/Python/PwCpTxtExtractor/main.py" protocol="file" />
      <jump line="507" column="44" filename="$USER_HOME$/programming/Python/PwCpTxtExtractor/main.py" protocol="file" />
      <jump line="508" column="69" filename="$USER_HOME$/programming/Python/PwCpTxtExtractor/main.py" protocol="file" />
      <jump line="505" column="38" filename="$USER_HOME$/programming/Python/PwCpTxtExtractor/main.py" protocol="file" />
      <jump line="520" column="0" filename="$USER_HOME$/programming/Python/PwCpTxtExtractor/main.py" protocol="file" />
      <jump line="501" column="25" filename="$USER_HOME$/programming/Python/PwCpTxtExtractor/main.py" protocol="file" />
      <jump line="500" column="0" filename="$USER_HOME$/programming/Python/PwCpTxtExtractor/main.py" protocol="file" />
      <jump line="509" column="19" filename="$USER_HOME$/programming/Python/PwCpTxtExtractor/main.py" protocol="file" />
      <jump line="0" column="0" filename="$USER_HOME$/programming/Python/PwCpTxtExtractor/6775241398_Batch-52-Static GK Batch-Inspector बैच by S K Dambiwal Sir.txt" protocol="file" />
      <jump line="506" column="0" filename="$USER_HOME$/programming/Python/PwCpTxtExtractor/main.py" protocol="file" />
      <jump line="512" column="60" filename="$USER_HOME$/programming/Python/PwCpTxtExtractor/main.py" protocol="file" />
      <jump line="517" column="22" filename="$USER_HOME$/programming/Python/PwCpTxtExtractor/main.py" protocol="file" />
      <jump line="411" column="143" filename="$USER_HOME$/programming/Python/PwCpTxtExtractor/main.py" protocol="file" />
      <jump line="401" column="50" filename="$USER_HOME$/programming/Python/PwCpTxtExtractor/main.py" protocol="file" />
      <jump line="419" column="63" filename="$USER_HOME$/programming/Python/PwCpTxtExtractor/main.py" protocol="file" />
      <jump line="412" column="61" filename="$USER_HOME$/programming/Python/PwCpTxtExtractor/main.py" protocol="file" />
      <jump line="29" column="10" filename="$USER_HOME$/programming/Python/PwCpTxtExtractor/app.json" protocol="file" />
      <jump line="5" column="534" filename="$USER_HOME$/programming/Python/PwCpTxtExtractor/config.py" protocol="file" />
      <jump line="0" column="0" filename="$USER_HOME$/programming/Python/PwCpTxtExtractor/6775241398_History [इतिहास]-रणभूमि बैच-देशी जुगाड़ वाला by S K Dambiwal SIR.txt" protocol="file" />
      <jump line="28" column="23" filename="$USER_HOME$/programming/Python/PwCpTxtExtractor/app.json" protocol="file" />
      <jump line="6" column="0" filename="$USER_HOME$/programming/Python/PwCpTxtExtractor/config.py" protocol="file" />
      <jump line="548" column="0" filename="$USER_HOME$/programming/Python/PwCpTxtExtractor/main.py" protocol="file" />
      <jump line="549" column="49" filename="$USER_HOME$/programming/Python/PwCpTxtExtractor/main.py" protocol="file" />
      <jump line="566" column="8" filename="$USER_HOME$/programming/Python/PwCpTxtExtractor/main.py" protocol="file" />
      <jump line="564" column="13" filename="$USER_HOME$/programming/Python/PwCpTxtExtractor/main.py" protocol="file" />
      <jump line="565" column="20" filename="$USER_HOME$/programming/Python/PwCpTxtExtractor/main.py" protocol="file" />
      <jump line="557" column="37" filename="$USER_HOME$/programming/Python/PwCpTxtExtractor/main.py" protocol="file" />
      <jump line="561" column="35" filename="$USER_HOME$/programming/Python/PwCpTxtExtractor/main.py" protocol="file" />
      <jump line="91" column="42" filename="$USER_HOME$/programming/Python/PwCpTxtExtractor/main.py" protocol="file" />
      <jump line="90" column="124" filename="$USER_HOME$/programming/Python/PwCpTxtExtractor/main.py" protocol="file" />
      <jump line="63" column="4" filename="$USER_HOME$/programming/Python/PwCpTxtExtractor/main.py" protocol="file" />
      <jump line="61" column="8" filename="$USER_HOME$/programming/Python/PwCpTxtExtractor/main.py" protocol="file" />
      <jump line="70" column="29" filename="$USER_HOME$/programming/Python/PwCpTxtExtractor/main.py" protocol="file" />
      <jump line="69" column="28" filename="$USER_HOME$/programming/Python/PwCpTxtExtractor/main.py" protocol="file" />
      <jump line="147" column="20" filename="$USER_HOME$/programming/Python/PwCpTxtExtractor/main.py" protocol="file" />
      <jump line="137" column="62" filename="$USER_HOME$/programming/Python/PwCpTxtExtractor/main.py" protocol="file" />
      <jump line="526" column="21" filename="$USER_HOME$/programming/Python/PwCpTxtExtractor/main.py" protocol="file" />
      <jump line="527" column="0" filename="$USER_HOME$/programming/Python/PwCpTxtExtractor/main.py" protocol="file" />
      <jump line="248" column="4" filename="$USER_HOME$/programming/Python/PwCpTxtExtractor/main.py" protocol="file" />
      <jump line="295" column="49" filename="$USER_HOME$/programming/Python/PwCpTxtExtractor/main.py" protocol="file" />
      <jump line="287" column="0" filename="$USER_HOME$/programming/Python/PwCpTxtExtractor/main.py" protocol="file" />
      <jump line="302" column="0" filename="$USER_HOME$/programming/Python/PwCpTxtExtractor/main.py" protocol="file" />
      <jump line="293" column="40" filename="$USER_HOME$/programming/Python/PwCpTxtExtractor/main.py" protocol="file" />
      <jump line="288" column="16" filename="$USER_HOME$/programming/Python/PwCpTxtExtractor/main.py" protocol="file" />
      <jump line="317" column="0" filename="$USER_HOME$/programming/Python/PwCpTxtExtractor/main.py" protocol="file" />
      <jump line="313" column="129" filename="$USER_HOME$/programming/Python/PwCpTxtExtractor/main.py" protocol="file" />
      <jump line="181" column="59" filename="$USER_HOME$/programming/Python/PwCpTxtExtractor/main.py" protocol="file" />
      <jump line="180" column="24" filename="$USER_HOME$/programming/Python/PwCpTxtExtractor/main.py" protocol="file" />
      <jump line="249" column="0" filename="$USER_HOME$/programming/Python/PwCpTxtExtractor/main.py" protocol="file" />
      <jump line="195" column="29" filename="$USER_HOME$/programming/Python/PwCpTxtExtractor/main.py" protocol="file" />
      <jump line="202" column="23" filename="$USER_HOME$/programming/Python/PwCpTxtExtractor/main.py" protocol="file" />
      <jump line="210" column="55" filename="$USER_HOME$/programming/Python/PwCpTxtExtractor/main.py" protocol="file" />
      <jump line="121" column="0" filename="$USER_HOME$/programming/Python/PwCpTxtExtractor/main.py" protocol="file" />
      <jump line="103" column="27" filename="$USER_HOME$/programming/Python/PwCpTxtExtractor/main.py" protocol="file" />
      <jump line="80" column="87" filename="$USER_HOME$/programming/Python/PwCpTxtExtractor/main.py" protocol="file" />
      <jump line="99" column="6" filename="$USER_HOME$/programming/Python/PwCpTxtExtractor/main.py" protocol="file" />
      <jump line="85" column="39" filename="$USER_HOME$/programming/Python/PwCpTxtExtractor/main.py" protocol="file" />
      <jump line="124" column="23" filename="$USER_HOME$/programming/Python/PwCpTxtExtractor/main.py" protocol="file" />
      <jump line="125" column="0" filename="$USER_HOME$/programming/Python/PwCpTxtExtractor/main.py" protocol="file" />
      <jump line="299" column="49" filename="$USER_HOME$/programming/Python/PwCpTxtExtractor/main.py" protocol="file" />
      <jump line="82" column="11" filename="$USER_HOME$/programming/Python/PwCpTxtExtractor/main.py" protocol="file" />
      <jump line="112" column="0" filename="$USER_HOME$/programming/Python/PwCpTxtExtractor/main.py" protocol="file" />
      <jump line="132" column="45" filename="$USER_HOME$/programming/Python/PwCpTxtExtractor/main.py" protocol="file" />
      <jump line="51" column="12" filename="$USER_HOME$/programming/Python/PwCpTxtExtractor/main.py" protocol="file" />
    </project>
    <project id="quiz_era-8c044197">
      <jump line="0" column="0" filename="$USER_HOME$/programming/Python/quiz_era/backup/app.py" protocol="file" />
      <jump line="326" column="44" filename="$USER_HOME$/programming/Python/quiz_era/backup/app.py" protocol="file" />
      <jump line="321" column="22" filename="$USER_HOME$/programming/Python/quiz_era/app.py" protocol="file" />
      <jump line="0" column="0" filename="$USER_HOME$/programming/Python/quiz_era/backup/app old.py" protocol="file" />
      <jump line="57" column="41" filename="$USER_HOME$/programming/Python/quiz_era/backup/app old.py" protocol="file" />
      <jump line="321" column="21" filename="$USER_HOME$/programming/Python/quiz_era/backup/app.py" protocol="file" />
      <jump line="352" column="17" filename="$USER_HOME$/programming/Python/quiz_era/backup/app.py" protocol="file" />
      <jump line="349" column="19" filename="$USER_HOME$/programming/Python/quiz_era/app.py" protocol="file" />
      <jump line="355" column="3" filename="$USER_HOME$/programming/Python/quiz_era/app.py" protocol="file" />
      <jump line="420" column="17" filename="$USER_HOME$/programming/Python/quiz_era/app.py" protocol="file" />
      <jump line="364" column="34" filename="$USER_HOME$/programming/Python/quiz_era/backup/app.py" protocol="file" />
      <jump line="416" column="0" filename="$USER_HOME$/programming/Python/quiz_era/app.py" protocol="file" />
      <jump line="425" column="10" filename="$USER_HOME$/programming/Python/quiz_era/app.py" protocol="file" />
      <jump line="408" column="29" filename="$USER_HOME$/programming/Python/quiz_era/app.py" protocol="file" />
      <jump line="412" column="35" filename="$USER_HOME$/programming/Python/quiz_era/app.py" protocol="file" />
      <jump line="411" column="0" filename="$USER_HOME$/programming/Python/quiz_era/app.py" protocol="file" />
      <jump line="18" column="13" filename="$USER_HOME$/programming/Python/quiz_era/app.py" protocol="file" />
      <jump line="16" column="6" filename="$USER_HOME$/programming/Python/quiz_era/app.py" protocol="file" />
      <jump line="0" column="0" filename="$USER_HOME$/programming/Python/quiz_era/app.py" protocol="file" />
      <jump line="7" column="11" filename="$USER_HOME$/programming/Python/quiz_era/app.py" protocol="file" />
    </project>
  </component>
  <component name="VimMarksSettings">
    <globalmarks />
    <localmarks>
      <file name="$USER_HOME$/programming/Python/Cp-Extractor/venv/lib/python3.12/site-packages/pyromod/listen/message_handler.py" timestamp="1752417159393">
        <mark key="&quot;" line="97" column="0" />
      </file>
      <file name="$USER_HOME$/programming/Python/quiz_era/app.py" timestamp="1752586884416">
        <mark key="'" line="0" column="0" />
        <mark key="[" line="286" column="0" />
        <mark key="]" line="375" column="0" />
        <mark key="." line="375" column="0" />
        <mark key="^" line="375" column="0" />
      </file>
      <file name="$USER_HOME$/programming/Python/PwCpTxtExtractor/app.json" timestamp="1752425378850">
        <mark key="[" line="28" column="22" />
        <mark key="]" line="28" column="24" />
        <mark key="^" line="28" column="24" />
        <mark key="." line="28" column="23" />
      </file>
      <file name="$USER_HOME$/programming/Python/PwCpTxtExtractor/6775241398_Batch-52-Static GK Batch-Inspector बैच by S K Dambiwal Sir.txt" timestamp="1752424053084">
        <mark key="&quot;" line="0" column="0" />
      </file>
      <file name="$USER_HOME$/programming/Python/PwCpTxtExtractor/config.py" timestamp="1752425363463">
        <mark key="[" line="5" column="53" />
        <mark key="]" line="5" column="53" />
        <mark key="^" line="5" column="567" />
        <mark key="." line="5" column="53" />
      </file>
      <file name="$USER_HOME$/programming/Python/quiz_era/backup/app.py" timestamp="1752586137648">
        <mark key="[" line="43" column="18" />
      </file>
      <file name="$USER_HOME$/programming/Python/quiz_era/backup/app old.py" timestamp="1752586247593">
        <mark key="&quot;" line="57" column="41" />
        <mark key="[" line="18" column="26" />
      </file>
      <file name="$USER_HOME$/programming/Python/PwCpTxtExtractor/main.py" timestamp="1752426403004">
        <mark key="'" line="51" column="12" />
        <mark key="[" line="302" column="5" />
        <mark key="]" line="302" column="5" />
        <mark key="." line="302" column="5" />
      </file>
    </localmarks>
  </component>
  <component name="VimRegisterSettings">
    <registers>
      <register name="&quot;" type="LINE_WISE">
        <text encoding="base64">aW1wb3J0IHN0cmVhbWxpdCBhcyBzdAppbXBvcnQganNvbgppbXBvcnQgb3MKaW1wb3J0IHJhbmRvbQpmcm9tIHBhdGhsaWIgaW1wb3J0IFBhdGgKZnJvbSBkYXRldGltZSBpbXBvcnQgZGF0ZXRpbWUKaW1wb3J0IHBhbmRhcyBhcyBwZAppbXBvcnQgcGxvdGx5LmV4cHJlc3MgYXMgcHgKaW1wb3J0IHRpbWUKCiMgLS0tIENvbmZpZ3VyYXRpb24gLS0tCnN0LnNldF9wYWdlX2NvbmZpZyhwYWdlX3RpdGxlPSJBZHZhbmNlZCBRdWl6IEFwcCIsIGxheW91dD0id2lkZSIsIGluaXRpYWxfc2lkZWJhcl9zdGF0ZT0iZXhwYW5kZWQiKQoKIyAtLS0gQ29uc3RhbnRzIC0tLQpRVUlaX0RBVEFfRElSID0gUGF0aCgicXVpel9kYXRhIikKU0FWRURfUVVFU1RJT05TX0ZJTEUgPSBQYXRoKCJzYXZlZF9xdWVzdGlvbnMuanNvbiIpCkhJU1RPUllfRklMRSA9IFBhdGgoInF1aXpfaGlzdG9yeS5qc29uIikKCiMgLS0tIEhlbHBlciBGdW5jdGlvbnMgLS0tCgpkZWYgaW5pdGlhbGl6ZV9zZXNzaW9uX3N0YXRlKCk6CiAgICAiIiJJbml0aWFsaXplcyBhbGwgbmVjZXNzYXJ5IHNlc3Npb24gc3RhdGUgdmFyaWFibGVzLiIiIgogICAgaWYgInBhZ2UiIG5vdCBpbiBzdC5zZXNzaW9uX3N0YXRlOgogICAgICAgIHN0LnNlc3Npb25fc3RhdGUucGFnZSA9ICJRdWl6IgogICAgaWYgInNhdmVkX3F1ZXN0aW9ucyIgbm90IGluIHN0LnNlc3Npb25fc3RhdGU6CiAgICAgICAgc3Quc2Vzc2lvbl9zdGF0ZS5zYXZlZF9xdWVzdGlvbnMgPSBsb2FkX2pzb24oU0FWRURfUVVFU1RJT05TX0ZJTEUsIGRlZmF1bHQ9e30pCiAgICBpZiAicXVpel9oaXN0b3J5IiBub3QgaW4gc3Quc2Vzc2lvbl9zdGF0ZToKICAgICAgICAjIExvYWQgaGlzdG9yeSwgaGFuZGxlIHBvdGVudGlhbCBvbGQgZm9ybWF0IGJ5IGNoZWNraW5nIHR5cGUKICAgICAgICBoaXN0b3J5ID0gbG9hZF9qc29uKEhJU1RPUllfRklMRSwgZGVmYXVsdD1bXSkKICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShoaXN0b3J5LCBsaXN0KToKICAgICAgICAgICAgaGlzdG9yeSA9IFtdICMgSWYgb2xkIGZvcm1hdCB3YXMgYSBkaWN0LCBzdGFydCBmcmVzaAogICAgICAgIHN0LnNlc3Npb25fc3RhdGUucXVpel9oaXN0b3J5ID0gaGlzdG9yeQogICAgaWYgInF1aXpfc3RhcnRlZCIgbm90IGluIHN0LnNlc3Npb25fc3RhdGU6CiAgICAgICAgc3Quc2Vzc2lvbl9zdGF0ZS5xdWl6X3N0YXJ0ZWQgPSBGYWxzZQoKZGVmIGxvYWRfanNvbihmaWxlX3BhdGgsIGRlZmF1bHQpOgogICAgIiIiTG9hZCBhIEpTT04gZmlsZSB3aXRoIGVycm9yIGhhbmRsaW5nLiIiIgogICAgaWYgZmlsZV9wYXRoLmV4aXN0cygpOgogICAgICAgIHRyeToKICAgICAgICAgICAgd2l0aCBvcGVuKGZpbGVfcGF0aCwgJ3InLCBlbmNvZGluZz0ndXRmLTgnKSBhcyBmOgogICAgICAgICAgICAgICAgcmV0dXJuIGpzb24ubG9hZChmKQogICAgICAgIGV4Y2VwdCAoanNvbi5KU09ORGVjb2RlRXJyb3IsIEZpbGVOb3RGb3VuZEVycm9yKToKICAgICAgICAgICAgcmV0dXJuIGRlZmF1bHQKICAgIHJldHVybiBkZWZhdWx0CgpkZWYgc2F2ZV9qc29uKGRhdGEsIGZpbGVfcGF0aCk6CiAgICAiIiJTYXZlIGRhdGEgdG8gYSBKU09OIGZpbGUuIiIiCiAgICB0cnk6CiAgICAgICAgd2l0aCBvcGVuKGZpbGVfcGF0aCwgJ3cnLCBlbmNvZGluZz0ndXRmLTgnKSBhcyBmOgogICAgICAgICAgICBqc29uLmR1bXAoZGF0YSwgZiwgaW5kZW50PTQpCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgc3QuZXJyb3IoZiJGYWlsZWQgdG8gc2F2ZSBkYXRhIHRvIHtmaWxlX3BhdGh9OiB7ZX0iKQoKZGVmIGxvYWRfcXVpel9kYXRhKGNhdGVnb3J5LCBmaWxlbmFtZSk6CiAgICAiIiJMb2FkIGEgc3BlY2lmaWMgcXVpeiBKU09OIGZpbGUuIiIiCiAgICBmaWxlX3BhdGggPSBRVUlaX0RBVEFfRElSIC8gY2F0ZWdvcnkgLyBmaWxlbmFtZQogICAgcmV0dXJuIGxvYWRfanNvbihmaWxlX3BhdGgsIE5vbmUpCgpkZWYgc2F2ZV9xdWVzdGlvbl9mb3JfcmV2aXNpb24oY2F0ZWdvcnksIHRvcGljLCBxdWVzdGlvbl9kYXRhKToKICAgICIiIlNhdmVzIGEgcXVlc3Rpb24gdG8gdGhlIHJldmlzaW9uIGxpc3QuIiIiCiAgICBpZiBjYXRlZ29yeSBub3QgaW4gc3Quc2Vzc2lvbl9zdGF0ZS5zYXZlZF9xdWVzdGlvbnM6CiAgICAgICAgc3Quc2Vzc2lvbl9zdGF0ZS5zYXZlZF9xdWVzdGlvbnNbY2F0ZWdvcnldID0ge30KICAgIGlmIHRvcGljIG5vdCBpbiBzdC5zZXNzaW9uX3N0YXRlLnNhdmVkX3F1ZXN0aW9uc1tjYXRlZ29yeV06CiAgICAgICAgc3Quc2Vzc2lvbl9zdGF0ZS5zYXZlZF9xdWVzdGlvbnNbY2F0ZWdvcnldW3RvcGljXSA9IFtdCgogICAgaWYgbm90IGFueShxWydxdWVzdGlvbiddID09IHF1ZXN0aW9uX2RhdGFbJ3F1ZXN0aW9uJ10gZm9yIHEgaW4gc3Quc2Vzc2lvbl9zdGF0ZS5zYXZlZF9xdWVzdGlvbnNbY2F0ZWdvcnldW3RvcGljXSk6CiAgICAgICAgc3Quc2Vzc2lvbl9zdGF0ZS5zYXZlZF9xdWVzdGlvbnNbY2F0ZWdvcnldW3RvcGljXS5hcHBlbmQocXVlc3Rpb25fZGF0YSkKICAgICAgICBzYXZlX2pzb24oc3Quc2Vzc2lvbl9zdGF0ZS5zYXZlZF9xdWVzdGlvbnMsIFNBVkVEX1FVRVNUSU9OU19GSUxFKQogICAgICAgIHN0LnNlc3Npb25fc3RhdGUuY3VycmVudF9xdWl6X3NhdmVkX2NvdW50ICs9IDEKICAgICAgICBzdC50b2FzdChmIlF1ZXN0aW9uIHNhdmVkIHVuZGVyICd7Y2F0ZWdvcnl9IC0+IHt0b3BpY30nISIsIGljb249IvCfkr4iKQogICAgZWxzZToKICAgICAgICBzdC50b2FzdCgiVGhpcyBxdWVzdGlvbiBpcyBhbHJlYWR5IHNhdmVkLiIsIGljb249IvCfkY0iKQoKZGVmIHJlbW92ZV9zYXZlZF9xdWVzdGlvbihjYXRlZ29yeSwgdG9waWMsIHF1ZXN0aW9uX3RvX3JlbW92ZSk6CiAgICAiIiJSZW1vdmVzIGEgc3BlY2lmaWMgcXVlc3Rpb24gZnJvbSB0aGUgc2F2ZWQgbGlzdC4iIiIKICAgIHRvcGljX3F1ZXN0aW9ucyA9IHN0LnNlc3Npb25fc3RhdGUuc2F2ZWRfcXVlc3Rpb25zLmdldChjYXRlZ29yeSwge30pLmdldCh0b3BpYywgW10pCiAgICAKICAgICMgRmlsdGVyIG91dCB0aGUgcXVlc3Rpb24gdG8gcmVtb3ZlCiAgICB1cGRhdGVkX3F1ZXN0aW9ucyA9IFtxIGZvciBxIGluIHRvcGljX3F1ZXN0aW9ucyBpZiBxWydxdWVzdGlvbiddICE9IHF1ZXN0aW9uX3RvX3JlbW92ZVsncXVlc3Rpb24nXV0KICAgIAogICAgaWYgbGVuKHVwZGF0ZWRfcXVlc3Rpb25zKSA8IGxlbih0b3BpY19xdWVzdGlvbnMpOgogICAgICAgIHN0LnNlc3Npb25fc3RhdGUuc2F2ZWRfcXVlc3Rpb25zW2NhdGVnb3J5XVt0b3BpY10gPSB1cGRhdGVkX3F1ZXN0aW9ucwogICAgICAgIAogICAgICAgICMgQ2xlYW4gdXAgZW1wdHkgdG9waWNzIG9yIGNhdGVnb3JpZXMKICAgICAgICBpZiBub3Qgc3Quc2Vzc2lvbl9zdGF0ZS5zYXZlZF9xdWVzdGlvbnNbY2F0ZWdvcnldW3RvcGljXToKICAgICAgICAgICAgZGVsIHN0LnNlc3Npb25fc3RhdGUuc2F2ZWRfcXVlc3Rpb25zW2NhdGVnb3J5XVt0b3BpY10KICAgICAgICBpZiBub3Qgc3Quc2Vzc2lvbl9zdGF0ZS5zYXZlZF9xdWVzdGlvbnNbY2F0ZWdvcnldOgogICAgICAgICAgICBkZWwgc3Quc2Vzc2lvbl9zdGF0ZS5zYXZlZF9xdWVzdGlvbnNbY2F0ZWdvcnldCiAgICAgICAgICAgIAogICAgICAgIHNhdmVfanNvbihzdC5zZXNzaW9uX3N0YXRlLnNhdmVkX3F1ZXN0aW9ucywgU0FWRURfUVVFU1RJT05TX0ZJTEUpCiAgICAgICAgc3QudG9hc3QoIlF1ZXN0aW9uIHJlbW92ZWQhIiwgaWNvbj0i8J+Xke+4jyIpCiAgICAgICAgc3QucmVydW4oKQoKZGVmIGFkZF9xdWl6X3JlY29yZF90b19oaXN0b3J5KHJlY29yZCk6CiAgICAiIiJBZGRzIGEgbmV3IHF1aXogcmVzdWx0IHRvIHRoZSBoaXN0b3J5LiIiIgogICAgc3Quc2Vzc2lvbl9zdGF0ZS5xdWl6X2hpc3RvcnkuYXBwZW5kKHJlY29yZCkKICAgIHNhdmVfanNvbihzdC5zZXNzaW9uX3N0YXRlLnF1aXpfaGlzdG9yeSwgSElTVE9SWV9GSUxFKQoKIyAtLS0gVUkgQ29tcG9uZW50cyAtLS0KCmRlZiBiZWF1dGlmdWxfc2lkZWJhcigpOgogICAgIiIiQ3JlYXRlcyBhIHZpc3VhbGx5IGFwcGVhbGluZyBzaWRlYmFyIGZvciBuYXZpZ2F0aW9uLiIiIgogICAgd2l0aCBzdC5zaWRlYmFyOgogICAgICAgIHN0Lm1hcmtkb3duKCI8aDEgc3R5bGU9J3RleHQtYWxpZ246IGNlbnRlcjsgY29sb3I6ICMwMDdCRkY7Jz7wn6egPC9oMT4iLCB1bnNhZmVfYWxsb3dfaHRtbD1UcnVlKQogICAgICAgIHN0Lm1hcmtkb3duKCI8aDEgc3R5bGU9J3RleHQtYWxpZ246IGNlbnRlcjsnPlF1aXogQXBwPC9oMT4iLCB1bnNhZmVfYWxsb3dfaHRtbD1UcnVlKQogICAgICAgIHN0Lm1hcmtkb3duKCItLS0iKQoKICAgICAgICBpZiBzdC5idXR0b24oIvCfk50gVGFrZSBhIFF1aXoiLCB1c2VfY29udGFpbmVyX3dpZHRoPVRydWUsIGtleT0ibmF2X3F1aXoiKToKICAgICAgICAgICAgc3Quc2Vzc2lvbl9zdGF0ZS5wYWdlID0gIlF1aXoiCiAgICAgICAgICAgIHN0LnJlcnVuKCkKICAgICAgICBpZiBzdC5idXR0b24oIvCfk5ogUmV2aXNpb24gSHViIiwgdXNlX2NvbnRhaW5lcl93aWR0aD1UcnVlLCBrZXk9Im5hdl9yZXZpc2lvbiIpOgogICAgICAgICAgICBzdC5zZXNzaW9uX3N0YXRlLnBhZ2UgPSAiUmV2aXNpb24iCiAgICAgICAgICAgIHN0LnJlcnVuKCkKICAgICAgICBpZiBzdC5idXR0b24oIvCfk4ogVmlldyBTdGF0cyIsIHVzZV9jb250YWluZXJfd2lkdGg9VHJ1ZSwga2V5PSJuYXZfc3RhdHMiKToKICAgICAgICAgICAgc3Quc2Vzc2lvbl9zdGF0ZS5wYWdlID0gIlN0YXRpc3RpY3MiCiAgICAgICAgICAgIHN0LnJlcnVuKCkKCiAgICAgICAgc3QubWFya2Rvd24oIi0tLSIpCiAgICAgICAgc3QuaW5mbygiTmF2aWdhdGUgdGhlIGFwcCB1c2luZyB0aGUgYnV0dG9ucyBhYm92ZS4iKQoKZGVmIHNob3dfcXVpel9wYWdlKCk6CiAgICAiIiJSZW5kZXJzIHRoZSBtYWluIHF1aXogaW50ZXJmYWNlLiIiIgogICAgc3QudGl0bGUoIvCfk50gVGFrZSBhIFF1aXoiKQogICAgaWYgbm90IFFVSVpfREFUQV9ESVIuZXhpc3RzKCk6CiAgICAgICAgb3MubWFrZWRpcnMoUVVJWl9EQVRBX0RJUikKICAgICAgICBzdC5pbmZvKGYiQ3JlYXRlZCAne1FVSVpfREFUQV9ESVJ9JyBkaXJlY3RvcnkuIFBvcHVsYXRlIGl0IHdpdGggY2F0ZWdvcnkgc3ViZGlyZWN0b3JpZXMgYW5kIEpTT04gcXVpeiBmaWxlcy4iKQogICAgICAgIHJldHVybgoKICAgIGNhdGVnb3JpZXMgPSBbZC5uYW1lIGZvciBkIGluIFFVSVpfREFUQV9ESVIuaXRlcmRpcigpIGlmIGQuaXNfZGlyKCldCiAgICBpZiBub3QgY2F0ZWdvcmllczoKICAgICAgICBzdC53YXJuaW5nKCJObyBjYXRlZ29yaWVzIGZvdW5kLiBDcmVhdGUgc3ViZGlyZWN0b3JpZXMgaW5zaWRlICdxdWl6X2RhdGEnLiIpCiAgICAgICAgcmV0dXJuCgogICAgY29sMSwgY29sMiA9IHN0LmNvbHVtbnMoMikKICAgIHNlbGVjdGVkX2NhdGVnb3J5ID0gY29sMS5zZWxlY3Rib3goIkNob29zZSBhIENhdGVnb3J5OiIsIG9wdGlvbnM9c29ydGVkKGNhdGVnb3JpZXMpKQogICAgCiAgICBxdWl6X2ZpbGVzID0gW10KICAgIGlmIHNlbGVjdGVkX2NhdGVnb3J5OgogICAgICAgIGNhdGVnb3J5X3BhdGggPSBRVUlaX0RBVEFfRElSIC8gc2VsZWN0ZWRfY2F0ZWdvcnkKICAgICAgICBxdWl6X2ZpbGVzID0gW2YubmFtZSBmb3IgZiBpbiBjYXRlZ29yeV9wYXRoLmdsb2IoIiouanNvbiIpXQoKICAgIGlmIG5vdCBxdWl6X2ZpbGVzOgogICAgICAgIGNvbDIud2FybmluZyhmIk5vIHF1aXogZmlsZXMgaW4gJ3tzZWxlY3RlZF9jYXRlZ29yeX0nLiIpCiAgICAgICAgcmV0dXJuCiAgICBzZWxlY3RlZF9maWxlID0gY29sMi5zZWxlY3Rib3goIkNob29zZSBhIFF1aXogVG9waWM6Iiwgb3B0aW9ucz1zb3J0ZWQocXVpel9maWxlcykpCgogICAgaWYgc2VsZWN0ZWRfZmlsZToKICAgICAgICBxdWl6X2RhdGEgPSBsb2FkX3F1aXpfZGF0YShzZWxlY3RlZF9jYXRlZ29yeSwgc2VsZWN0ZWRfZmlsZSkKICAgICAgICBpZiBub3QgcXVpel9kYXRhOiByZXR1cm4KCiAgICAgICAgc3QubWFya2Rvd24oIi0tLSIpCiAgICAgICAgdG90YWxfcXVlc3Rpb25zID0gbGVuKHF1aXpfZGF0YSkKICAgICAgICBzdC5zdWJoZWFkZXIoZiJUaGlzIHF1aXogaGFzIHt0b3RhbF9xdWVzdGlvbnN9IHF1ZXN0aW9ucy4iKQoKICAgICAgICBjMSwgYzIsIGMzID0gc3QuY29sdW1ucyhbMSwgMSwgMl0pCiAgICAgICAgc3RhcnRfcSA9IGMxLm51bWJlcl9pbnB1dCgiU3RhcnQgZnJvbToiLCBtaW5fdmFsdWU9MSwgbWF4X3ZhbHVlPXRvdGFsX3F1ZXN0aW9ucywgdmFsdWU9MSkKICAgICAgCiAgICAgICAgIyBTZXQgYSBzZW5zaWJsZSBkZWZhdWx0IGZvciB0aGUgZW5kIHZhbHVlIHRoYXQncyBhd2FyZSBvZiB0aGUgc3RhcnQgdmFsdWUKICAgICAgICBkZWZhdWx0X2VuZF9xID0gbWluKHN0YXJ0X3EgKyA5LCB0b3RhbF9xdWVzdGlvbnMpIAogICAgICAKICAgICAgICBlbmRfcSA9IGMyLm51bWJlcl9pbnB1dCgiRW5kIGF0OiIsIG1pbl92YWx1ZT1zdGFydF9xLCBtYXhfdmFsdWU9dG90YWxfcXVlc3Rpb25zLCB2YWx1ZT1kZWZhdWx0X2VuZF9xKQoKICAgICAgICAKICAgICAgICBjMy5tYXJrZG93bigiPGRpdiBzdHlsZT0nbWFyZ2luLXRvcDogMjhweDsnPjwvZGl2PiIsIHVuc2FmZV9hbGxvd19odG1sPVRydWUpCiAgICAgICAgaWYgYzMuYnV0dG9uKCJTdGFydCBRdWl6ISIsIHVzZV9jb250YWluZXJfd2lkdGg9VHJ1ZSk6CiAgICAgICAgICAgIHJlc2V0X3F1aXpfc3RhdGUocXVpel9kYXRhLCBzdGFydF9xLCBlbmRfcSwgc2VsZWN0ZWRfY2F0ZWdvcnksIHNlbGVjdGVkX2ZpbGUucmVwbGFjZSgnLmpzb24nLCAnJykpCiAgICAgICAgICAgIHN0LnNlc3Npb25fc3RhdGUucXVpel9zdGFydGVkID0gVHJ1ZQogICAgICAgICAgICBzdC5yZXJ1bigpCgpkZWYgcmVzZXRfcXVpel9zdGF0ZShxdWl6X2RhdGEsIHN0YXJ0LCBlbmQsIGNhdGVnb3J5LCB0b3BpYywgc291cmNlPSJmaWxlIik6CiAgICAiIiJSZXNldHMgdGhlIHN0YXRlIGZvciBhIG5ldyBxdWl6IHNlc3Npb24uIiIiCiAgICBjaHVuayA9IHF1aXpfZGF0YVtzdGFydC0xOmVuZF0KICAgIHJhbmRvbS5zaHVmZmxlKGNodW5rKQoKICAgIHN0LnNlc3Npb25fc3RhdGUucXVlc3Rpb25zID0gY2h1bmsKICAgIHN0LnNlc3Npb25fc3RhdGUuc2NvcmUgPSAwCiAgICBzdC5zZXNzaW9uX3N0YXRlLmN1cnJlbnRfcV9pbmRleCA9IDAKICAgIHN0LnNlc3Npb25fc3RhdGUuc3VibWl0dGVkID0gRmFsc2UKICAgIHN0LnNlc3Npb25fc3RhdGUuY3VycmVudF9jYXRlZ29yeSA9IGNhdGVnb3J5CiAgICBzdC5zZXNzaW9uX3N0YXRlLmN1cnJlbnRfdG9waWMgPSB0b3BpYwogICAgc3Quc2Vzc2lvbl9zdGF0ZS5xdWl6X3NvdXJjZSA9IHNvdXJjZQogICAgc3Quc2Vzc2lvbl9zdGF0ZS5xdWl6X3N0YXJ0X3RpbWUgPSBkYXRldGltZS5ub3coKS5pc29mb3JtYXQoKQogICAgc3Quc2Vzc2lvbl9zdGF0ZS5jdXJyZW50X3F1aXpfc2F2ZWRfY291bnQgPSAwCiAgICBzdC5zZXNzaW9uX3N0YXRlLnJlc3VsdHNfc2F2ZWQgPSBGYWxzZQogICAgaWYgJ2Fuc3dlcl9vcHRpb25zJyBpbiBzdC5zZXNzaW9uX3N0YXRlOgogICAgICAgIGRlbCBzdC5zZXNzaW9uX3N0YXRlLmFuc3dlcl9vcHRpb25zCgoKIyBkZWYgcmVuZGVyX3F1aXpfZ2FtZXBsYXkoKToKICAgICMgIiIiSGFuZGxlcyB0aGUgcmVuZGVyaW5nIG9mIHRoZSBhY3RpdmUgcXVpeiBxdWVzdGlvbi4iIiIKICAgICMgaWYgc3Quc2Vzc2lvbl9zdGF0ZS5jdXJyZW50X3FfaW5kZXggPj0gbGVuKHN0LnNlc3Npb25fc3RhdGUucXVlc3Rpb25zKToKICAgICMgICAgIHNob3dfcXVpel9jb21wbGV0aW9uKCkKICAgICMgICAgIHJldHVybgoKICAgICMgcWEgPSBzdC5zZXNzaW9uX3N0YXRlLnF1ZXN0aW9uc1tzdC5zZXNzaW9uX3N0YXRlLmN1cnJlbnRfcV9pbmRleF0KCiAgICAjIGlmICdhbnN3ZXJfb3B0aW9ucycgbm90IGluIHN0LnNlc3Npb25fc3RhdGU6CiAgICAjICAgICBvcHRpb25zID0gcWEuZ2V0KCdvcHRpb25zJywgW10pLmNvcHkoKQogICAgIyAgICAgcmFuZG9tLnNodWZmbGUob3B0aW9ucykKICAgICMgICAgIHN0LnNlc3Npb25fc3RhdGUuYW5zd2VyX29wdGlvbnMgPSBvcHRpb25zCgogICAgIyBzdC5wcm9ncmVzcygoc3Quc2Vzc2lvbl9zdGF0ZS5jdXJyZW50X3FfaW5kZXggKyAxKSAvIGxlbihzdC5zZXNzaW9uX3N0YXRlLnF1ZXN0aW9ucykpCiAgICAjIHN0LndyaXRlKGYiIyMjIFF1ZXN0aW9uIHtzdC5zZXNzaW9uX3N0YXRlLmN1cnJlbnRfcV9pbmRleCArIDF9L3tsZW4oc3Quc2Vzc2lvbl9zdGF0ZS5xdWVzdGlvbnMpfSIpCiAgICAjIHN0LndyaXRlKGYi8J+TnCAqKntxYVsncXVlc3Rpb24nXX0qKiIpCgogICAgIyB3aXRoIHN0LmZvcm0oa2V5PWYicV97c3Quc2Vzc2lvbl9zdGF0ZS5jdXJyZW50X3FfaW5kZXh9Iik6CiAgICAjICAgICB1c2VyX2Nob2ljZSA9IHN0LnJhZGlvKCJDaG9vc2UgeW91ciBhbnN3ZXI6Iiwgc3Quc2Vzc2lvbl9zdGF0ZS5hbnN3ZXJfb3B0aW9ucywgaW5kZXg9Tm9uZSkKICAgICMgICAgIHN1Ym1pdF9idXR0b24gPSBzdC5mb3JtX3N1Ym1pdF9idXR0b24oIlN1Ym1pdCBBbnN3ZXIiKQoKICAgICMgICAgIGlmIHN1Ym1pdF9idXR0b24gYW5kIHVzZXJfY2hvaWNlOgogICAgIyAgICAgICAgIHN0LnNlc3Npb25fc3RhdGUuc3VibWl0dGVkID0gVHJ1ZQogICAgIyAgICAgICAgIGlmIHVzZXJfY2hvaWNlID09IHFhWydjb3JyZWN0X2Fuc3dlciddOgogICAgIyAgICAgICAgICAgICBzdC5zZXNzaW9uX3N0YXRlLnNjb3JlICs9IDEKICAgICMgICAgICAgICAgICAgc3Quc3VjY2Vzcygi4pyFIENvcnJlY3QhIikKICAgICMgICAgICAgICBlbHNlOgogICAgIyAgICAgICAgICAgICBzdC5lcnJvcihmIuKdjCBJbmNvcnJlY3QhIENvcnJlY3QgYW5zd2VyOiAqKntxYVsnY29ycmVjdF9hbnN3ZXInXX0qKiIpCgogICAgIyBpZiBzdC5zZXNzaW9uX3N0YXRlLnN1Ym1pdHRlZDoKICAgICMgICAgIGNvbDEsIGNvbDIgPSBzdC5jb2x1bW5zKFswLjcsIDAuM10pCiAgICAjICAgICBpZiBjb2wxLmJ1dHRvbigiTmV4dCBRdWVzdGlvbiDinqHvuI8iLCB1c2VfY29udGFpbmVyX3dpZHRoPVRydWUpOgogICAgIyAgICAgICAgIHN0LnNlc3Npb25fc3RhdGUuY3VycmVudF9xX2luZGV4ICs9IDEKICAgICMgICAgICAgICBzdC5zZXNzaW9uX3N0YXRlLnN1Ym1pdHRlZCA9IEZhbHNlCiAgICAjICAgICAgICAgaWYgJ2Fuc3dlcl9vcHRpb25zJyBpbiBzdC5zZXNzaW9uX3N0YXRlOiBkZWwgc3Quc2Vzc2lvbl9zdGF0ZS5hbnN3ZXJfb3B0aW9ucwogICAgIyAgICAgICAgIHN0LnJlcnVuKCkKICAgICMgICAgIGlmIGNvbDIuYnV0dG9uKCLwn5K+IFNhdmUgZm9yIFJldmlzaW9uIiwgdXNlX2NvbnRhaW5lcl93aWR0aD1UcnVlKToKICAgICMgICAgICAgICBzYXZlX3F1ZXN0aW9uX2Zvcl9yZXZpc2lvbihzdC5zZXNzaW9uX3N0YXRlLmN1cnJlbnRfY2F0ZWdvcnksIHN0LnNlc3Npb25fc3RhdGUuY3VycmVudF90b3BpYywgcWEpCgpkZWYgcmVuZGVyX3F1aXpfZ2FtZXBsYXkoKToKICAgICIiIkhhbmRsZXMgdGhlIHJlbmRlcmluZyBvZiB0aGUgYWN0aXZlIHF1aXogcXVlc3Rpb24gd2l0aCBhIHRpbWVyLiIiIgogICAgaWYgc3Quc2Vzc2lvbl9zdGF0ZS5jdXJyZW50X3FfaW5kZXggPj0gbGVuKHN0LnNlc3Npb25fc3RhdGUucXVlc3Rpb25zKToKICAgICAgICBzaG93X3F1aXpfY29tcGxldGlvbigpCiAgICAgICAgcmV0dXJuCgogICAgIyAtLS0gVGltZXIgYW5kIFByb2dyZXNzIEJhciAtLS0KICAgIHN0YXJ0X3RpbWUgPSBkYXRldGltZS5mcm9taXNvZm9ybWF0KHN0LnNlc3Npb25fc3RhdGUucXVpel9zdGFydF90aW1lKQogICAgZWxhcHNlZF90aW1lID0gZGF0ZXRpbWUubm93KCkgLSBzdGFydF90aW1lCiAgICB0b3RhbF9zZWNvbmRzID0gaW50KGVsYXBzZWRfdGltZS50b3RhbF9zZWNvbmRzKCkpCiAgICBob3VycywgcmVtYWluZGVyID0gZGl2bW9kKHRvdGFsX3NlY29uZHMsIDM2MDApCiAgICBtaW51dGVzLCBzZWNvbmRzID0gZGl2bW9kKHJlbWFpbmRlciwgNjApCiAgICB0aW1lX3N0ciA9IGYie2hvdXJzOjAyfTp7bWludXRlczowMn06e3NlY29uZHM6MDJ9IgogICAgCiAgICBwcm9ncmVzc192YWwgPSAoc3Quc2Vzc2lvbl9zdGF0ZS5jdXJyZW50X3FfaW5kZXgpIC8gbGVuKHN0LnNlc3Npb25fc3RhdGUucXVlc3Rpb25zKQogICAgCiAgICAjIENyZWF0ZSBhIGNsZWFuIGxheW91dCBmb3IgcHJvZ3Jlc3MgYW5kIHRpbWVyCiAgICBjb2wxLCBjb2wyID0gc3QuY29sdW1ucyhbMywgMV0pCiAgICB3aXRoIGNvbDE6CiAgICAgICAgc3QucHJvZ3Jlc3MocHJvZ3Jlc3NfdmFsLCB0ZXh0PWYiUXVlc3Rpb24ge3N0LnNlc3Npb25fc3RhdGUuY3VycmVudF9xX2luZGV4ICsgMX0ve2xlbihzdC5zZXNzaW9uX3N0YXRlLnF1ZXN0aW9ucyl9IikKICAgIHdpdGggY29sMjoKICAgICAgICBzdC5tYXJrZG93bihmIjxkaXYgc3R5bGU9J3RleHQtYWxpZ246IHJpZ2h0Oyc+4o+zIDxiPnt0aW1lX3N0cn08L2I+PC9kaXY+IiwgdW5zYWZlX2FsbG93X2h0bWw9VHJ1ZSkKICAgIAogICAgc3QubWFya2Rvd24oIi0tLSIpICMgU2VwYXJhdG9yCgogICAgIyAtLS0gUXVlc3Rpb24gRGlzcGxheSAtLS0KICAgIHFhID0gc3Quc2Vzc2lvbl9zdGF0ZS5xdWVzdGlvbnNbc3Quc2Vzc2lvbl9zdGF0ZS5jdXJyZW50X3FfaW5kZXhdCgogICAgaWYgJ2Fuc3dlcl9vcHRpb25zJyBub3QgaW4gc3Quc2Vzc2lvbl9zdGF0ZToKICAgICAgICBvcHRpb25zID0gcWEuZ2V0KCdvcHRpb25zJywgW10pLmNvcHkoKQogICAgICAgIHJhbmRvbS5zaHVmZmxlKG9wdGlvbnMpCiAgICAgICAgc3Quc2Vzc2lvbl9zdGF0ZS5hbnN3ZXJfb3B0aW9ucyA9IG9wdGlvbnMKCiAgICBzdC53cml0ZShmIiMjIyDwn5OcICoqe3FhWydxdWVzdGlvbiddfSoqIikKCiAgICAjIC0tLSBBbnN3ZXIgRm9ybSAtLS0KICAgIHdpdGggc3QuZm9ybShrZXk9ZiJxX3tzdC5zZXNzaW9uX3N0YXRlLmN1cnJlbnRfcV9pbmRleH0iKToKICAgICAgICB1c2VyX2Nob2ljZSA9IHN0LnJhZGlvKCJDaG9vc2UgeW91ciBhbnN3ZXI6Iiwgc3Quc2Vzc2lvbl9zdGF0ZS5hbnN3ZXJfb3B0aW9ucywgaW5kZXg9Tm9uZSwgbGFiZWxfdmlzaWJpbGl0eT0iY29sbGFwc2VkIikKICAgICAgICBzdWJtaXRfYnV0dG9uID0gc3QuZm9ybV9zdWJtaXRfYnV0dG9uKCJTdWJtaXQgQW5zd2VyIikKCiAgICAgICAgaWYgc3VibWl0X2J1dHRvbiBhbmQgdXNlcl9jaG9pY2U6CiAgICAgICAgICAgIHN0LnNlc3Npb25fc3RhdGUuc3VibWl0dGVkID0gVHJ1ZQogICAgICAgICAgICBpZiB1c2VyX2Nob2ljZSA9PSBxYVsnY29ycmVjdF9hbnN3ZXInXToKICAgICAgICAgICAgICAgIHN0LnNlc3Npb25fc3RhdGUuc2NvcmUgKz0gMQogICAgICAgICAgICAgICAgc3Quc3VjY2Vzcygi4pyFIENvcnJlY3QhIikKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHN0LmVycm9yKGYi4p2MIEluY29ycmVjdCEgQ29ycmVjdCBhbnN3ZXI6ICoqe3FhWydjb3JyZWN0X2Fuc3dlciddfSoqIikKCiAgICAjIC0tLSBOYXZpZ2F0aW9uIGFmdGVyIFN1Ym1pc3Npb24gLS0tCiAgICBpZiBzdC5zZXNzaW9uX3N0YXRlLnN1Ym1pdHRlZDoKICAgICAgICBjb2wxLCBjb2wyID0gc3QuY29sdW1ucyhbMC43LCAwLjNdKQogICAgICAgIGlmIGNvbDEuYnV0dG9uKCJOZXh0IFF1ZXN0aW9uIOKeoe+4jyIsIHVzZV9jb250YWluZXJfd2lkdGg9VHJ1ZSk6CiAgICAgICAgICAgIHN0LnNlc3Npb25fc3RhdGUuY3VycmVudF9xX2luZGV4ICs9IDEKICAgICAgICAgICAgc3Quc2Vzc2lvbl9zdGF0ZS5zdWJtaXR0ZWQgPSBGYWxzZQogICAgICAgICAgICBpZiAnYW5zd2VyX29wdGlvbnMnIGluIHN0LnNlc3Npb25fc3RhdGU6IGRlbCBzdC5zZXNzaW9uX3N0YXRlLmFuc3dlcl9vcHRpb25zCiAgICAgICAgICAgICMgQSBzbWFsbCBkZWxheSBjYW4gaW1wcm92ZSB0aGUgZmVlbCBvZiB0aGUgYXBwLCBwcmV2ZW50aW5nIGFjY2lkZW50YWwgZG91YmxlLWNsaWNrcwogICAgICAgICAgICB0aW1lLnNsZWVwKDAuMSkgCiAgICAgICAgICAgIHN0LnJlcnVuKCkKICAgICAgICBpZiBjb2wyLmJ1dHRvbigi8J+SviBTYXZlIGZvciBSZXZpc2lvbiIsIHVzZV9jb250YWluZXJfd2lkdGg9VHJ1ZSk6CiAgICAgICAgICAgIHNhdmVfcXVlc3Rpb25fZm9yX3JldmlzaW9uKHN0LnNlc3Npb25fc3RhdGUuY3VycmVudF9jYXRlZ29yeSwgc3Quc2Vzc2lvbl9zdGF0ZS5jdXJyZW50X3RvcGljLCBxYSkKCmRlZiBzaG93X3F1aXpfY29tcGxldGlvbigpOgogICAgIiIiRGlzcGxheXMgdGhlIGZpbmFsIHNjb3JlIGFuZCBzYXZlcyB0aGUgcmVjb3JkLiIiIgogICAgc3Quc3VjY2Vzcygi8J+OiSAqKlF1aXogQ29tcGxldGUhKiog8J+OiSIpCiAgICBzdC5iYWxsb29ucygpCiAgICBzY29yZSA9IHN0LnNlc3Npb25fc3RhdGUuc2NvcmUKICAgIHRvdGFsID0gbGVuKHN0LnNlc3Npb25fc3RhdGUucXVlc3Rpb25zKQogICAgc3QubWFya2Rvd24oZiIjIyMgWW91ciBGaW5hbCBTY29yZTogKip7c2NvcmV9IC8ge3RvdGFsfSoqIikKICAgIAogICAgaWYgc3Quc2Vzc2lvbl9zdGF0ZS5nZXQoInF1aXpfc291cmNlIikgPT0gImZpbGUiIGFuZCBub3Qgc3Quc2Vzc2lvbl9zdGF0ZS5nZXQoInJlc3VsdHNfc2F2ZWQiLCBGYWxzZSk6CiAgICAgc3RhcnRfdGltZSA9IGRhdGV0aW1lLmZyb21pc29mb3JtYXQoc3Quc2Vzc2lvbl9zdGF0ZS5xdWl6X3N0YXJ0X3RpbWUpCiAgICAgZW5kX3RpbWUgPSBkYXRldGltZS5ub3coKQogICAgIHRpbWVfdGFrZW4gPSBzdHIoZW5kX3RpbWUgLSBzdGFydF90aW1lKS5zcGxpdCgnLicpWzBdCgogICAgIHJlY29yZCA9IHsKICAgICAgICAicXVpel9uYW1lIjogZiJ7c3Quc2Vzc2lvbl9zdGF0ZS5jdXJyZW50X2NhdGVnb3J5fSAtIHtzdC5zZXNzaW9uX3N0YXRlLmN1cnJlbnRfdG9waWN9IiwKICAgICAgICAidG9waWMiOiBzdC5zZXNzaW9uX3N0YXRlLmN1cnJlbnRfdG9waWMsCiAgICAgICAgImRhdGUiOiBlbmRfdGltZS5zdHJmdGltZSgiJVktJW0tJWQgJUg6JU06JVMiKSwKICAgICAgICAidGltZV90YWtlbiI6IHRpbWVfdGFrZW4sCiAgICAgICAgImNvcnJlY3QiOiBzY29yZSwKICAgICAgICAiaW5jb3JyZWN0IjogdG90YWwgLSBzY29yZSwKICAgICAgICAiYWNjdXJhY3kiOiBmIntzY29yZSAvIHRvdGFsICogMTAwOi4yZn0lIiwKICAgICAgICAic2F2ZWRfcXVlc3Rpb25zIjogc3Quc2Vzc2lvbl9zdGF0ZS5jdXJyZW50X3F1aXpfc2F2ZWRfY291bnQKICAgICB9CiAgICAgYWRkX3F1aXpfcmVjb3JkX3RvX2hpc3RvcnkocmVjb3JkKQogICAgIHN0LnNlc3Npb25fc3RhdGUucmVzdWx0c19zYXZlZCA9IFRydWUgIyBTZXQgdGhlIGZsYWcgdG8gcHJldmVudCByZS1zYXZpbmcKCiAgICBpZiBzdC5idXR0b24oIkJhY2sgdG8gTWFpbiBQYWdlIik6CiAgICAgICAgc3Quc2Vzc2lvbl9zdGF0ZS5xdWl6X3N0YXJ0ZWQgPSBGYWxzZQogICAgICAgIGtleXNfdG9fY2xlYXIgPSBbJ3F1ZXN0aW9ucycsICdzY29yZScsICdjdXJyZW50X3FfaW5kZXgnLCAnc3VibWl0dGVkJywgJ2N1cnJlbnRfY2F0ZWdvcnknLCAnY3VycmVudF90b3BpYycsICdxdWl6X3NvdXJjZScsICdxdWl6X3N0YXJ0X3RpbWUnLCAnY3VycmVudF9xdWl6X3NhdmVkX2NvdW50JywgJ3Jlc3VsdHNfc2F2ZWQnXQogICAgICAgIGZvciBrZXkgaW4ga2V5c190b19jbGVhcjoKICAgICAgICAgICAgaWYga2V5IGluIHN0LnNlc3Npb25fc3RhdGU6IGRlbCBzdC5zZXNzaW9uX3N0YXRlW2tleV0KICAgICAgICBzdC5yZXJ1bigpCgpkZWYgc2hvd19yZXZpc2lvbl9wYWdlKCk6CiAgICAiIiJSZW5kZXJzIHRoZSBwYWdlIGZvciByZXZpZXdpbmcsIHJlbW92aW5nLCBhbmQgc3RhcnRpbmcgYSBxdWl6IGZyb20gc2F2ZWQgcXVlc3Rpb25zLiIiIgogICAgc3QudGl0bGUoIvCfk5ogUmV2aXNpb24gSHViIikKICAgIHN0LndyaXRlKCJSZXZpZXcgc2F2ZWQgcXVlc3Rpb25zIG9yIHN0YXJ0IGEgcXVpeiBmcm9tIHlvdXIgcmV2aXNpb24gbGlzdC4iKQoKICAgIHNhdmVkX2RhdGEgPSBzdC5zZXNzaW9uX3N0YXRlLmdldCgic2F2ZWRfcXVlc3Rpb25zIiwge30pCiAgICBpZiBub3Qgc2F2ZWRfZGF0YToKICAgICAgICBzdC5pbmZvKCJZb3UgaGF2ZW4ndCBzYXZlZCBhbnkgcXVlc3Rpb25zIHlldC4gR28gdG8gdGhlIFF1aXogcGFnZSB0byBzYXZlIHNvbWUhIikKICAgICAgICByZXR1cm4KCiAgICAjIC0tLSBDcmVhdGUgYSBzaW5nbGUgZmxhdCBsaXN0IG9mIGFsbCBxdWVzdGlvbnMsIGVhY2ggd2l0aCBpdHMgY2F0ZWdvcnkgYW5kIHRvcGljIGNvbnRleHQgLS0tCiAgICBhbGxfcXVlc3Rpb25zX3dpdGhfY29udGV4dCA9IFtdCiAgICBmb3IgY2F0LCB0b3BpY3MgaW4gc2F2ZWRfZGF0YS5pdGVtcygpOgogICAgICAgIGZvciB0b3BpYywgcXMgaW4gdG9waWNzLml0ZW1zKCk6CiAgICAgICAgICAgIGZvciBxIGluIHFzOgogICAgICAgICAgICAgICAgcV9jb3B5ID0gcS5jb3B5KCkKICAgICAgICAgICAgICAgIHFfY29weVsnY2F0ZWdvcnknXSA9IGNhdAogICAgICAgICAgICAgICAgcV9jb3B5Wyd0b3BpYyddID0gdG9waWMKICAgICAgICAgICAgICAgIGFsbF9xdWVzdGlvbnNfd2l0aF9jb250ZXh0LmFwcGVuZChxX2NvcHkpCgogICAgcXVlc3Rpb25zX3RvX2Rpc3BsYXkgPSBhbGxfcXVlc3Rpb25zX3dpdGhfY29udGV4dAogICAgCiAgICBzdC5tYXJrZG93bigiLS0tIikKCiAgICAjIC0tLSBTdGFydCBRdWl6IGZyb20gU2F2ZWQgLS0tCiAgICBzdC5zdWJoZWFkZXIoZiJTdGFydCBhIFF1aXogZnJvbSB7bGVuKHF1ZXN0aW9uc190b19kaXNwbGF5KX0gU2F2ZWQgUXVlc3Rpb25zIikKICAgIGlmIG5vdCBxdWVzdGlvbnNfdG9fZGlzcGxheToKICAgICAgICBzdC53YXJuaW5nKCJObyBxdWVzdGlvbnMgc2F2ZWQgdG8gc3RhcnQgYSByZXZpc2lvbiBxdWl6LiIpCiAgICBlbGlmIHN0LmJ1dHRvbigiU3RhcnQgUmV2aXNpb24gUXVpeiEiLCB1c2VfY29udGFpbmVyX3dpZHRoPVRydWUpOgogICAgICAgIHJlc2V0X3F1aXpfc3RhdGUocXVlc3Rpb25zX3RvX2Rpc3BsYXksIDEsIGxlbihxdWVzdGlvbnNfdG9fZGlzcGxheSksICJSZXZpc2lvbiIsICJTYXZlZCBRdWVzdGlvbnMiLCBzb3VyY2U9InJldmlzaW9uIikKICAgICAgICBzdC5zZXNzaW9uX3N0YXRlLnF1aXpfc3RhcnRlZCA9IFRydWUKICAgICAgICBzdC5yZXJ1bigpCgogICAgc3QubWFya2Rvd24oIi0tLSIpCiAgICAKICAgICMgLS0tIERpc3BsYXkgU2F2ZWQgUXVlc3Rpb25zIHdpdGggUmVtb3ZlIE9wdGlvbiAtLS0KICAgIHN0LnN1YmhlYWRlcigiRXhwbG9yZSBTYXZlZCBRdWVzdGlvbnMiKQogICAgaWYgbm90IHF1ZXN0aW9uc190b19kaXNwbGF5OgogICAgICAgIHN0LmluZm8oIllvdXIgcmV2aXNpb24gaHViIGlzIGVtcHR5LiIpCiAgICAgICAgcmV0dXJuCgogICAgZm9yIGksIHFhIGluIGVudW1lcmF0ZShxdWVzdGlvbnNfdG9fZGlzcGxheSk6CiAgICAgICAgIyBxYSBub3cgY29udGFpbnMgJ2NhdGVnb3J5JyBhbmQgJ3RvcGljJwogICAgICAgIGV4cGFuZGVyX3RpdGxlID0gZiIqKntxYS5nZXQoJ2NhdGVnb3J5JywgJ04vQScpfSB8IHtxYS5nZXQoJ3RvcGljJywgJ04vQScpfSoqOiB7cWFbJ3F1ZXN0aW9uJ119IgogICAgICAgIHdpdGggc3QuZXhwYW5kZXIoZXhwYW5kZXJfdGl0bGUpOgogICAgICAgICAgICBzdC5zdWNjZXNzKGYiKipDb3JyZWN0IEFuc3dlcjoqKiB7cWFbJ2NvcnJlY3RfYW5zd2VyJ119IikKCiAgICAgICAgICAgICMgQWRkIGEgcmVtb3ZlIGJ1dHRvbiBpbiB0aGUgY29ybmVyCiAgICAgICAgICAgIGlmIHN0LmJ1dHRvbigi8J+Xke+4jyBSZW1vdmUgdGhpcyBxdWVzdGlvbiIsIGtleT1mInJlbW92ZV97cWFbJ2NhdGVnb3J5J119X3txYVsndG9waWMnXX1fe2l9IiwgdXNlX2NvbnRhaW5lcl93aWR0aD1UcnVlKToKICAgICAgICAgICAgICAgIHJlbW92ZV9zYXZlZF9xdWVzdGlvbihxYVsnY2F0ZWdvcnknXSwgcWFbJ3RvcGljJ10sIHFhKQogICAgICAgICAgICAgICAgIyBUaGUgcmVtb3ZlX3NhdmVkX3F1ZXN0aW9uIGZ1bmN0aW9uIGFscmVhZHkgY2FsbHMgc3QucmVydW4oKQoKZGVmIHNob3dfc3RhdGlzdGljc19wYWdlKCk6CiAgICAiIiJSZW5kZXJzIHRoZSBhZHZhbmNlZCBzdGF0aXN0aWNzIHBhZ2Ugd2l0aCBncmFwaHMgYW5kIGEgZGV0YWlsZWQgdGFibGUuIiIiCiAgICBzdC50aXRsZSgi8J+TiiBZb3VyIFBlcmZvcm1hbmNlIFN0YXRpc3RpY3MiKQogICAgaGlzdG9yeSA9IHN0LnNlc3Npb25fc3RhdGUuZ2V0KCJxdWl6X2hpc3RvcnkiLCBbXSkKCiAgICBpZiBub3QgaGlzdG9yeToKICAgICAgICBzdC5pbmZvKCJObyBxdWl6IGhpc3RvcnkgZm91bmQuIENvbXBsZXRlIGEgcXVpeiB0byBzZWUgeW91ciBzdGF0cyBoZXJlISIpCiAgICAgICAgcmV0dXJuCgogICAgZGYgPSBwZC5EYXRhRnJhbWUoaGlzdG9yeSkKICAgIGRmWydkYXRlJ10gPSBwZC50b19kYXRldGltZShkZlsnZGF0ZSddKQogICAgZGZbJ2FjY3VyYWN5X3ZhbCddID0gZGZbJ2FjY3VyYWN5J10uc3RyLnJlcGxhY2UoJyUnLCAnJykuYXN0eXBlKGZsb2F0KQoKICAgICMgLS0tIE92ZXJhbGwgTWV0cmljcyAtLS0KICAgIHRvdGFsX3F1aXp6ZXMgPSBsZW4oZGYpCiAgICB0b3RhbF9jb3JyZWN0ID0gZGZbJ2NvcnJlY3QnXS5zdW0oKQogICAgdG90YWxfaW5jb3JyZWN0ID0gZGZbJ2luY29ycmVjdCddLnN1bSgpCiAgICBvdmVyYWxsX2FjY3VyYWN5ID0gKHRvdGFsX2NvcnJlY3QgLyAodG90YWxfY29ycmVjdCArIHRvdGFsX2luY29ycmVjdCkgKiAxMDApIGlmICh0b3RhbF9jb3JyZWN0ICsgdG90YWxfaW5jb3JyZWN0KSA+IDAgZWxzZSAwCgogICAgY29sMSwgY29sMiwgY29sMyA9IHN0LmNvbHVtbnMoMykKICAgIGNvbDEubWV0cmljKCJUb3RhbCBRdWl6emVzIFRha2VuIiwgdG90YWxfcXVpenplcykKICAgIGNvbDIubWV0cmljKCJUb3RhbCBDb3JyZWN0IEFuc3dlcnMiLCBmInt0b3RhbF9jb3JyZWN0fSIpCiAgICBjb2wzLm1ldHJpYygiT3ZlcmFsbCBBY2N1cmFjeSIsIGYie292ZXJhbGxfYWNjdXJhY3k6LjJmfSUiKQogICAgc3QubWFya2Rvd24oIi0tLSIpCgogICAgIyAtLS0gVG9waWMtd2lzZSBQZXJmb3JtYW5jZSBDaGFydCAtLS0KICAgIHN0LnN1YmhlYWRlcigiUGVyZm9ybWFuY2UgYnkgVG9waWMiKQogICAgdG9waWNfc3RhdHMgPSBkZi5ncm91cGJ5KCd0b3BpYycpWydhY2N1cmFjeV92YWwnXS5tZWFuKCkucmVzZXRfaW5kZXgoKQogICAgZmlnX2JhciA9IHB4LmJhcih0b3BpY19zdGF0cywgeD0ndG9waWMnLCB5PSdhY2N1cmFjeV92YWwnLCB0aXRsZT0iQXZlcmFnZSBBY2N1cmFjeSBwZXIgVG9waWMiLAogICAgICAgICAgICAgICAgICAgICBsYWJlbHM9eyd0b3BpYyc6ICdRdWl6IFRvcGljJywgJ2FjY3VyYWN5X3ZhbCc6ICdBdmVyYWdlIEFjY3VyYWN5ICglKSd9LAogICAgICAgICAgICAgICAgICAgICBjb2xvcj0ndG9waWMnLCBoZWlnaHQ9NDAwKQogICAgc3QucGxvdGx5X2NoYXJ0KGZpZ19iYXIsIHVzZV9jb250YWluZXJfd2lkdGg9VHJ1ZSkKCiAgICAjIC0tLSBBY2N1cmFjeSBPdmVyIFRpbWUgQ2hhcnQgLS0tCiAgICBzdC5zdWJoZWFkZXIoIkFjY3VyYWN5IFRyZW5kIE92ZXIgVGltZSIpCiAgICBmaWdfbGluZSA9IHB4LmxpbmUoZGYuc29ydF92YWx1ZXMoJ2RhdGUnKSwgeD0nZGF0ZScsIHk9J2FjY3VyYWN5X3ZhbCcsIHRpdGxlPSJBY2N1cmFjeSBPdmVyIFRpbWUiLAogICAgICAgICAgICAgICAgICAgICAgIGxhYmVscz17J2RhdGUnOiAnRGF0ZScsICdhY2N1cmFjeV92YWwnOiAnQWNjdXJhY3kgKCUpJ30sIG1hcmtlcnM9VHJ1ZSwgaGVpZ2h0PTQwMCkKICAgIHN0LnBsb3RseV9jaGFydChmaWdfbGluZSwgdXNlX2NvbnRhaW5lcl93aWR0aD1UcnVlKQoKICAgICMgLS0tIERldGFpbGVkIFF1aXogSGlzdG9yeSBUYWJsZSAtLS0KICAgIHN0Lm1hcmtkb3duKCItLS0iKQogICAgc3Quc3ViaGVhZGVyKCJEZXRhaWxlZCBRdWl6IEhpc3RvcnkiKQogICAgc3QuZGF0YWZyYW1lKGRmW1sncXVpel9uYW1lJywgJ2RhdGUnLCAndGltZV90YWtlbicsICdjb3JyZWN0JywgJ2luY29ycmVjdCcsICdhY2N1cmFjeScsICdzYXZlZF9xdWVzdGlvbnMnXV0uc29ydF92YWx1ZXMoJ2RhdGUnLCBhc2NlbmRpbmc9RmFsc2UpLCB1c2VfY29udGFpbmVyX3dpZHRoPVRydWUpCgogICAgaWYgc3QuYnV0dG9uKCJSZXNldCBBbGwgSGlzdG9yeSIsIHR5cGU9InByaW1hcnkiKToKICAgICAgICBzdC5zZXNzaW9uX3N0YXRlLnF1aXpfaGlzdG9yeSA9IFtdCiAgICAgICAgc2F2ZV9qc29uKFtdLCBISVNUT1JZX0ZJTEUpCiAgICAgICAgc3QudG9hc3QoIkFsbCBxdWl6IGhpc3RvcnkgaGFzIGJlZW4gcmVzZXQhIiwgaWNvbj0i8J+Xke+4jyIpCiAgICAgICAgc3QucmVydW4oKQoKIyAtLS0gTWFpbiBBcHAgUm91dGVyIC0tLQpkZWYgbWFpbigpOgogICAgIiIiTWFpbiBmdW5jdGlvbiB0byBydW4gdGhlIFN0cmVhbWxpdCBhcHAuIiIiCiAgICBpbml0aWFsaXplX3Nlc3Npb25fc3RhdGUoKQogICAgYmVhdXRpZnVsX3NpZGViYXIoKQogICAgCiAgICBwYWdlID0gc3Quc2Vzc2lvbl9zdGF0ZS5nZXQoInBhZ2UiLCAiUXVpeiIpCiAgICBpc19xdWl6X2FjdGl2ZSA9IHN0LnNlc3Npb25fc3RhdGUuZ2V0KCJxdWl6X3N0YXJ0ZWQiLCBGYWxzZSkKCiAgICBpZiBpc19xdWl6X2FjdGl2ZToKICAgICAgICByZW5kZXJfcXVpel9nYW1lcGxheSgpCiAgICBlbGlmIHBhZ2UgPT0gIlF1aXoiOgogICAgICAgIHNob3dfcXVpel9wYWdlKCkKICAgIGVsaWYgcGFnZSA9PSAiUmV2aXNpb24iOgogICAgICAgIHNob3dfcmV2aXNpb25fcGFnZSgpCiAgICBlbGlmIHBhZ2UgPT0gIlN0YXRpc3RpY3MiOgogICAgICAgIHNob3dfc3RhdGlzdGljc19wYWdlKCkKCmlmIF9fbmFtZV9fID09ICJfX21haW5fXyI6CiAgICBtYWluKCkK</text>
      </register>
      <register name="-" type="CHARACTER_WISE">
        <text encoding="base64">LA==</text>
      </register>
      <register name="." type="CHARACTER_WISE">
        <text encoding="base64" />
      </register>
      <register name="0" type="LINE_WISE">
        <text encoding="base64">ICAgIGhlYWRlcnMgPSB7CiAgICAgICAgIkhvc3QiOiAiYXBpLmNsYXNzcGx1c2FwcC5jb20iLAogICAgICAgICJYLUFjY2Vzcy1Ub2tlbiI6IGNsYXNzcGx1c190b2tlbiwKICAgICAgICAiVXNlci1BZ2VudCI6ICJNb2JpbGUtQW5kcm9pZCIsCiAgICAgICAgIkFwcC1WZXJzaW9uIjogIjEuOC4yLjEiLAogICAgICAgICJBcGktVmVyc2lvbiI6ICI1MyIsCiAgICAgICAgIkRldmljZS1JZCI6ICI4MTRlMjAxYTViYjQ3ODMyIiwKICAgICAgICAiRGV2aWNlLURldGFpbHMiOiAiWGlhb21pX1JlZG1pIE5vdGUgN19TREstMzUiLAogICAgICAgICJSZWdpb24iOiAiSU4iLAogICAgICAgICJBY2NlcHQtTGFuZ3VhZ2UiOiAiZW4iLAogICAgICAgICJYLUNocm9tZS1WZXJzaW9uIjogIjEzOC4wLjcyMDQuNjMiLAogICAgICAgICJYLVdlYnZpZXctVmVyc2lvbiI6ICIxMzguMC43MjA0LjYzIiwKICAgICAgICAiQ29udGVudC1UeXBlIjogImFwcGxpY2F0aW9uL2pzb24iLAogICAgICAgICJCdWlsZC1OdW1iZXIiOiAiNTMiLAogICAgICAgICJJc3Jldmlld2Vyb24iOiAiMCIsCiAgICAgICAgIklzLUFwayI6ICIwIiwKICAgICAgICAiQWNjZXB0LUVuY29kaW5nIjogImd6aXAsIGRlZmxhdGUsIGJyIgogICAgfSwK</text>
      </register>
      <register name="1" type="LINE_WISE">
        <text encoding="base64">aW1wb3J0IHN0cmVhbWxpdCBhcyBzdAppbXBvcnQganNvbgppbXBvcnQgb3MKaW1wb3J0IHJhbmRvbQpmcm9tIHBhdGhsaWIgaW1wb3J0IFBhdGgKZnJvbSBkYXRldGltZSBpbXBvcnQgZGF0ZXRpbWUKaW1wb3J0IHBhbmRhcyBhcyBwZAppbXBvcnQgcGxvdGx5LmV4cHJlc3MgYXMgcHgKaW1wb3J0IHRpbWUKCiMgLS0tIENvbmZpZ3VyYXRpb24gLS0tCnN0LnNldF9wYWdlX2NvbmZpZyhwYWdlX3RpdGxlPSJBZHZhbmNlZCBRdWl6IEFwcCIsIGxheW91dD0id2lkZSIsIGluaXRpYWxfc2lkZWJhcl9zdGF0ZT0iZXhwYW5kZWQiKQoKIyAtLS0gQ29uc3RhbnRzIC0tLQpRVUlaX0RBVEFfRElSID0gUGF0aCgicXVpel9kYXRhIikKU0FWRURfUVVFU1RJT05TX0ZJTEUgPSBQYXRoKCJzYXZlZF9xdWVzdGlvbnMuanNvbiIpCkhJU1RPUllfRklMRSA9IFBhdGgoInF1aXpfaGlzdG9yeS5qc29uIikKCiMgLS0tIEhlbHBlciBGdW5jdGlvbnMgLS0tCgpkZWYgaW5pdGlhbGl6ZV9zZXNzaW9uX3N0YXRlKCk6CiAgICAiIiJJbml0aWFsaXplcyBhbGwgbmVjZXNzYXJ5IHNlc3Npb24gc3RhdGUgdmFyaWFibGVzLiIiIgogICAgaWYgInBhZ2UiIG5vdCBpbiBzdC5zZXNzaW9uX3N0YXRlOgogICAgICAgIHN0LnNlc3Npb25fc3RhdGUucGFnZSA9ICJRdWl6IgogICAgaWYgInNhdmVkX3F1ZXN0aW9ucyIgbm90IGluIHN0LnNlc3Npb25fc3RhdGU6CiAgICAgICAgc3Quc2Vzc2lvbl9zdGF0ZS5zYXZlZF9xdWVzdGlvbnMgPSBsb2FkX2pzb24oU0FWRURfUVVFU1RJT05TX0ZJTEUsIGRlZmF1bHQ9e30pCiAgICBpZiAicXVpel9oaXN0b3J5IiBub3QgaW4gc3Quc2Vzc2lvbl9zdGF0ZToKICAgICAgICAjIExvYWQgaGlzdG9yeSwgaGFuZGxlIHBvdGVudGlhbCBvbGQgZm9ybWF0IGJ5IGNoZWNraW5nIHR5cGUKICAgICAgICBoaXN0b3J5ID0gbG9hZF9qc29uKEhJU1RPUllfRklMRSwgZGVmYXVsdD1bXSkKICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShoaXN0b3J5LCBsaXN0KToKICAgICAgICAgICAgaGlzdG9yeSA9IFtdICMgSWYgb2xkIGZvcm1hdCB3YXMgYSBkaWN0LCBzdGFydCBmcmVzaAogICAgICAgIHN0LnNlc3Npb25fc3RhdGUucXVpel9oaXN0b3J5ID0gaGlzdG9yeQogICAgaWYgInF1aXpfc3RhcnRlZCIgbm90IGluIHN0LnNlc3Npb25fc3RhdGU6CiAgICAgICAgc3Quc2Vzc2lvbl9zdGF0ZS5xdWl6X3N0YXJ0ZWQgPSBGYWxzZQoKZGVmIGxvYWRfanNvbihmaWxlX3BhdGgsIGRlZmF1bHQpOgogICAgIiIiTG9hZCBhIEpTT04gZmlsZSB3aXRoIGVycm9yIGhhbmRsaW5nLiIiIgogICAgaWYgZmlsZV9wYXRoLmV4aXN0cygpOgogICAgICAgIHRyeToKICAgICAgICAgICAgd2l0aCBvcGVuKGZpbGVfcGF0aCwgJ3InLCBlbmNvZGluZz0ndXRmLTgnKSBhcyBmOgogICAgICAgICAgICAgICAgcmV0dXJuIGpzb24ubG9hZChmKQogICAgICAgIGV4Y2VwdCAoanNvbi5KU09ORGVjb2RlRXJyb3IsIEZpbGVOb3RGb3VuZEVycm9yKToKICAgICAgICAgICAgcmV0dXJuIGRlZmF1bHQKICAgIHJldHVybiBkZWZhdWx0CgpkZWYgc2F2ZV9qc29uKGRhdGEsIGZpbGVfcGF0aCk6CiAgICAiIiJTYXZlIGRhdGEgdG8gYSBKU09OIGZpbGUuIiIiCiAgICB0cnk6CiAgICAgICAgd2l0aCBvcGVuKGZpbGVfcGF0aCwgJ3cnLCBlbmNvZGluZz0ndXRmLTgnKSBhcyBmOgogICAgICAgICAgICBqc29uLmR1bXAoZGF0YSwgZiwgaW5kZW50PTQpCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgc3QuZXJyb3IoZiJGYWlsZWQgdG8gc2F2ZSBkYXRhIHRvIHtmaWxlX3BhdGh9OiB7ZX0iKQoKZGVmIGxvYWRfcXVpel9kYXRhKGNhdGVnb3J5LCBmaWxlbmFtZSk6CiAgICAiIiJMb2FkIGEgc3BlY2lmaWMgcXVpeiBKU09OIGZpbGUuIiIiCiAgICBmaWxlX3BhdGggPSBRVUlaX0RBVEFfRElSIC8gY2F0ZWdvcnkgLyBmaWxlbmFtZQogICAgcmV0dXJuIGxvYWRfanNvbihmaWxlX3BhdGgsIE5vbmUpCgpkZWYgc2F2ZV9xdWVzdGlvbl9mb3JfcmV2aXNpb24oY2F0ZWdvcnksIHRvcGljLCBxdWVzdGlvbl9kYXRhKToKICAgICIiIlNhdmVzIGEgcXVlc3Rpb24gdG8gdGhlIHJldmlzaW9uIGxpc3QuIiIiCiAgICBpZiBjYXRlZ29yeSBub3QgaW4gc3Quc2Vzc2lvbl9zdGF0ZS5zYXZlZF9xdWVzdGlvbnM6CiAgICAgICAgc3Quc2Vzc2lvbl9zdGF0ZS5zYXZlZF9xdWVzdGlvbnNbY2F0ZWdvcnldID0ge30KICAgIGlmIHRvcGljIG5vdCBpbiBzdC5zZXNzaW9uX3N0YXRlLnNhdmVkX3F1ZXN0aW9uc1tjYXRlZ29yeV06CiAgICAgICAgc3Quc2Vzc2lvbl9zdGF0ZS5zYXZlZF9xdWVzdGlvbnNbY2F0ZWdvcnldW3RvcGljXSA9IFtdCgogICAgaWYgbm90IGFueShxWydxdWVzdGlvbiddID09IHF1ZXN0aW9uX2RhdGFbJ3F1ZXN0aW9uJ10gZm9yIHEgaW4gc3Quc2Vzc2lvbl9zdGF0ZS5zYXZlZF9xdWVzdGlvbnNbY2F0ZWdvcnldW3RvcGljXSk6CiAgICAgICAgc3Quc2Vzc2lvbl9zdGF0ZS5zYXZlZF9xdWVzdGlvbnNbY2F0ZWdvcnldW3RvcGljXS5hcHBlbmQocXVlc3Rpb25fZGF0YSkKICAgICAgICBzYXZlX2pzb24oc3Quc2Vzc2lvbl9zdGF0ZS5zYXZlZF9xdWVzdGlvbnMsIFNBVkVEX1FVRVNUSU9OU19GSUxFKQogICAgICAgIHN0LnNlc3Npb25fc3RhdGUuY3VycmVudF9xdWl6X3NhdmVkX2NvdW50ICs9IDEKICAgICAgICBzdC50b2FzdChmIlF1ZXN0aW9uIHNhdmVkIHVuZGVyICd7Y2F0ZWdvcnl9IC0+IHt0b3BpY30nISIsIGljb249IvCfkr4iKQogICAgZWxzZToKICAgICAgICBzdC50b2FzdCgiVGhpcyBxdWVzdGlvbiBpcyBhbHJlYWR5IHNhdmVkLiIsIGljb249IvCfkY0iKQoKZGVmIHJlbW92ZV9zYXZlZF9xdWVzdGlvbihjYXRlZ29yeSwgdG9waWMsIHF1ZXN0aW9uX3RvX3JlbW92ZSk6CiAgICAiIiJSZW1vdmVzIGEgc3BlY2lmaWMgcXVlc3Rpb24gZnJvbSB0aGUgc2F2ZWQgbGlzdC4iIiIKICAgIHRvcGljX3F1ZXN0aW9ucyA9IHN0LnNlc3Npb25fc3RhdGUuc2F2ZWRfcXVlc3Rpb25zLmdldChjYXRlZ29yeSwge30pLmdldCh0b3BpYywgW10pCiAgICAKICAgICMgRmlsdGVyIG91dCB0aGUgcXVlc3Rpb24gdG8gcmVtb3ZlCiAgICB1cGRhdGVkX3F1ZXN0aW9ucyA9IFtxIGZvciBxIGluIHRvcGljX3F1ZXN0aW9ucyBpZiBxWydxdWVzdGlvbiddICE9IHF1ZXN0aW9uX3RvX3JlbW92ZVsncXVlc3Rpb24nXV0KICAgIAogICAgaWYgbGVuKHVwZGF0ZWRfcXVlc3Rpb25zKSA8IGxlbih0b3BpY19xdWVzdGlvbnMpOgogICAgICAgIHN0LnNlc3Npb25fc3RhdGUuc2F2ZWRfcXVlc3Rpb25zW2NhdGVnb3J5XVt0b3BpY10gPSB1cGRhdGVkX3F1ZXN0aW9ucwogICAgICAgIAogICAgICAgICMgQ2xlYW4gdXAgZW1wdHkgdG9waWNzIG9yIGNhdGVnb3JpZXMKICAgICAgICBpZiBub3Qgc3Quc2Vzc2lvbl9zdGF0ZS5zYXZlZF9xdWVzdGlvbnNbY2F0ZWdvcnldW3RvcGljXToKICAgICAgICAgICAgZGVsIHN0LnNlc3Npb25fc3RhdGUuc2F2ZWRfcXVlc3Rpb25zW2NhdGVnb3J5XVt0b3BpY10KICAgICAgICBpZiBub3Qgc3Quc2Vzc2lvbl9zdGF0ZS5zYXZlZF9xdWVzdGlvbnNbY2F0ZWdvcnldOgogICAgICAgICAgICBkZWwgc3Quc2Vzc2lvbl9zdGF0ZS5zYXZlZF9xdWVzdGlvbnNbY2F0ZWdvcnldCiAgICAgICAgICAgIAogICAgICAgIHNhdmVfanNvbihzdC5zZXNzaW9uX3N0YXRlLnNhdmVkX3F1ZXN0aW9ucywgU0FWRURfUVVFU1RJT05TX0ZJTEUpCiAgICAgICAgc3QudG9hc3QoIlF1ZXN0aW9uIHJlbW92ZWQhIiwgaWNvbj0i8J+Xke+4jyIpCiAgICAgICAgc3QucmVydW4oKQoKZGVmIGFkZF9xdWl6X3JlY29yZF90b19oaXN0b3J5KHJlY29yZCk6CiAgICAiIiJBZGRzIGEgbmV3IHF1aXogcmVzdWx0IHRvIHRoZSBoaXN0b3J5LiIiIgogICAgc3Quc2Vzc2lvbl9zdGF0ZS5xdWl6X2hpc3RvcnkuYXBwZW5kKHJlY29yZCkKICAgIHNhdmVfanNvbihzdC5zZXNzaW9uX3N0YXRlLnF1aXpfaGlzdG9yeSwgSElTVE9SWV9GSUxFKQoKIyAtLS0gVUkgQ29tcG9uZW50cyAtLS0KCmRlZiBiZWF1dGlmdWxfc2lkZWJhcigpOgogICAgIiIiQ3JlYXRlcyBhIHZpc3VhbGx5IGFwcGVhbGluZyBzaWRlYmFyIGZvciBuYXZpZ2F0aW9uLiIiIgogICAgd2l0aCBzdC5zaWRlYmFyOgogICAgICAgIHN0Lm1hcmtkb3duKCI8aDEgc3R5bGU9J3RleHQtYWxpZ246IGNlbnRlcjsgY29sb3I6ICMwMDdCRkY7Jz7wn6egPC9oMT4iLCB1bnNhZmVfYWxsb3dfaHRtbD1UcnVlKQogICAgICAgIHN0Lm1hcmtkb3duKCI8aDEgc3R5bGU9J3RleHQtYWxpZ246IGNlbnRlcjsnPlF1aXogQXBwPC9oMT4iLCB1bnNhZmVfYWxsb3dfaHRtbD1UcnVlKQogICAgICAgIHN0Lm1hcmtkb3duKCItLS0iKQoKICAgICAgICBpZiBzdC5idXR0b24oIvCfk50gVGFrZSBhIFF1aXoiLCB1c2VfY29udGFpbmVyX3dpZHRoPVRydWUsIGtleT0ibmF2X3F1aXoiKToKICAgICAgICAgICAgc3Quc2Vzc2lvbl9zdGF0ZS5wYWdlID0gIlF1aXoiCiAgICAgICAgICAgIHN0LnJlcnVuKCkKICAgICAgICBpZiBzdC5idXR0b24oIvCfk5ogUmV2aXNpb24gSHViIiwgdXNlX2NvbnRhaW5lcl93aWR0aD1UcnVlLCBrZXk9Im5hdl9yZXZpc2lvbiIpOgogICAgICAgICAgICBzdC5zZXNzaW9uX3N0YXRlLnBhZ2UgPSAiUmV2aXNpb24iCiAgICAgICAgICAgIHN0LnJlcnVuKCkKICAgICAgICBpZiBzdC5idXR0b24oIvCfk4ogVmlldyBTdGF0cyIsIHVzZV9jb250YWluZXJfd2lkdGg9VHJ1ZSwga2V5PSJuYXZfc3RhdHMiKToKICAgICAgICAgICAgc3Quc2Vzc2lvbl9zdGF0ZS5wYWdlID0gIlN0YXRpc3RpY3MiCiAgICAgICAgICAgIHN0LnJlcnVuKCkKCiAgICAgICAgc3QubWFya2Rvd24oIi0tLSIpCiAgICAgICAgc3QuaW5mbygiTmF2aWdhdGUgdGhlIGFwcCB1c2luZyB0aGUgYnV0dG9ucyBhYm92ZS4iKQoKZGVmIHNob3dfcXVpel9wYWdlKCk6CiAgICAiIiJSZW5kZXJzIHRoZSBtYWluIHF1aXogaW50ZXJmYWNlLiIiIgogICAgc3QudGl0bGUoIvCfk50gVGFrZSBhIFF1aXoiKQogICAgaWYgbm90IFFVSVpfREFUQV9ESVIuZXhpc3RzKCk6CiAgICAgICAgb3MubWFrZWRpcnMoUVVJWl9EQVRBX0RJUikKICAgICAgICBzdC5pbmZvKGYiQ3JlYXRlZCAne1FVSVpfREFUQV9ESVJ9JyBkaXJlY3RvcnkuIFBvcHVsYXRlIGl0IHdpdGggY2F0ZWdvcnkgc3ViZGlyZWN0b3JpZXMgYW5kIEpTT04gcXVpeiBmaWxlcy4iKQogICAgICAgIHJldHVybgoKICAgIGNhdGVnb3JpZXMgPSBbZC5uYW1lIGZvciBkIGluIFFVSVpfREFUQV9ESVIuaXRlcmRpcigpIGlmIGQuaXNfZGlyKCldCiAgICBpZiBub3QgY2F0ZWdvcmllczoKICAgICAgICBzdC53YXJuaW5nKCJObyBjYXRlZ29yaWVzIGZvdW5kLiBDcmVhdGUgc3ViZGlyZWN0b3JpZXMgaW5zaWRlICdxdWl6X2RhdGEnLiIpCiAgICAgICAgcmV0dXJuCgogICAgY29sMSwgY29sMiA9IHN0LmNvbHVtbnMoMikKICAgIHNlbGVjdGVkX2NhdGVnb3J5ID0gY29sMS5zZWxlY3Rib3goIkNob29zZSBhIENhdGVnb3J5OiIsIG9wdGlvbnM9c29ydGVkKGNhdGVnb3JpZXMpKQogICAgCiAgICBxdWl6X2ZpbGVzID0gW10KICAgIGlmIHNlbGVjdGVkX2NhdGVnb3J5OgogICAgICAgIGNhdGVnb3J5X3BhdGggPSBRVUlaX0RBVEFfRElSIC8gc2VsZWN0ZWRfY2F0ZWdvcnkKICAgICAgICBxdWl6X2ZpbGVzID0gW2YubmFtZSBmb3IgZiBpbiBjYXRlZ29yeV9wYXRoLmdsb2IoIiouanNvbiIpXQoKICAgIGlmIG5vdCBxdWl6X2ZpbGVzOgogICAgICAgIGNvbDIud2FybmluZyhmIk5vIHF1aXogZmlsZXMgaW4gJ3tzZWxlY3RlZF9jYXRlZ29yeX0nLiIpCiAgICAgICAgcmV0dXJuCiAgICBzZWxlY3RlZF9maWxlID0gY29sMi5zZWxlY3Rib3goIkNob29zZSBhIFF1aXogVG9waWM6Iiwgb3B0aW9ucz1zb3J0ZWQocXVpel9maWxlcykpCgogICAgaWYgc2VsZWN0ZWRfZmlsZToKICAgICAgICBxdWl6X2RhdGEgPSBsb2FkX3F1aXpfZGF0YShzZWxlY3RlZF9jYXRlZ29yeSwgc2VsZWN0ZWRfZmlsZSkKICAgICAgICBpZiBub3QgcXVpel9kYXRhOiByZXR1cm4KCiAgICAgICAgc3QubWFya2Rvd24oIi0tLSIpCiAgICAgICAgdG90YWxfcXVlc3Rpb25zID0gbGVuKHF1aXpfZGF0YSkKICAgICAgICBzdC5zdWJoZWFkZXIoZiJUaGlzIHF1aXogaGFzIHt0b3RhbF9xdWVzdGlvbnN9IHF1ZXN0aW9ucy4iKQoKICAgICAgICBjMSwgYzIsIGMzID0gc3QuY29sdW1ucyhbMSwgMSwgMl0pCiAgICAgICAgc3RhcnRfcSA9IGMxLm51bWJlcl9pbnB1dCgiU3RhcnQgZnJvbToiLCBtaW5fdmFsdWU9MSwgbWF4X3ZhbHVlPXRvdGFsX3F1ZXN0aW9ucywgdmFsdWU9MSkKICAgICAgCiAgICAgICAgIyBTZXQgYSBzZW5zaWJsZSBkZWZhdWx0IGZvciB0aGUgZW5kIHZhbHVlIHRoYXQncyBhd2FyZSBvZiB0aGUgc3RhcnQgdmFsdWUKICAgICAgICBkZWZhdWx0X2VuZF9xID0gbWluKHN0YXJ0X3EgKyA5LCB0b3RhbF9xdWVzdGlvbnMpIAogICAgICAKICAgICAgICBlbmRfcSA9IGMyLm51bWJlcl9pbnB1dCgiRW5kIGF0OiIsIG1pbl92YWx1ZT1zdGFydF9xLCBtYXhfdmFsdWU9dG90YWxfcXVlc3Rpb25zLCB2YWx1ZT1kZWZhdWx0X2VuZF9xKQoKICAgICAgICAKICAgICAgICBjMy5tYXJrZG93bigiPGRpdiBzdHlsZT0nbWFyZ2luLXRvcDogMjhweDsnPjwvZGl2PiIsIHVuc2FmZV9hbGxvd19odG1sPVRydWUpCiAgICAgICAgaWYgYzMuYnV0dG9uKCJTdGFydCBRdWl6ISIsIHVzZV9jb250YWluZXJfd2lkdGg9VHJ1ZSk6CiAgICAgICAgICAgIHJlc2V0X3F1aXpfc3RhdGUocXVpel9kYXRhLCBzdGFydF9xLCBlbmRfcSwgc2VsZWN0ZWRfY2F0ZWdvcnksIHNlbGVjdGVkX2ZpbGUucmVwbGFjZSgnLmpzb24nLCAnJykpCiAgICAgICAgICAgIHN0LnNlc3Npb25fc3RhdGUucXVpel9zdGFydGVkID0gVHJ1ZQogICAgICAgICAgICBzdC5yZXJ1bigpCgpkZWYgcmVzZXRfcXVpel9zdGF0ZShxdWl6X2RhdGEsIHN0YXJ0LCBlbmQsIGNhdGVnb3J5LCB0b3BpYywgc291cmNlPSJmaWxlIik6CiAgICAiIiJSZXNldHMgdGhlIHN0YXRlIGZvciBhIG5ldyBxdWl6IHNlc3Npb24uIiIiCiAgICBjaHVuayA9IHF1aXpfZGF0YVtzdGFydC0xOmVuZF0KICAgIHJhbmRvbS5zaHVmZmxlKGNodW5rKQoKICAgIHN0LnNlc3Npb25fc3RhdGUucXVlc3Rpb25zID0gY2h1bmsKICAgIHN0LnNlc3Npb25fc3RhdGUuc2NvcmUgPSAwCiAgICBzdC5zZXNzaW9uX3N0YXRlLmN1cnJlbnRfcV9pbmRleCA9IDAKICAgIHN0LnNlc3Npb25fc3RhdGUuc3VibWl0dGVkID0gRmFsc2UKICAgIHN0LnNlc3Npb25fc3RhdGUuY3VycmVudF9jYXRlZ29yeSA9IGNhdGVnb3J5CiAgICBzdC5zZXNzaW9uX3N0YXRlLmN1cnJlbnRfdG9waWMgPSB0b3BpYwogICAgc3Quc2Vzc2lvbl9zdGF0ZS5xdWl6X3NvdXJjZSA9IHNvdXJjZQogICAgc3Quc2Vzc2lvbl9zdGF0ZS5xdWl6X3N0YXJ0X3RpbWUgPSBkYXRldGltZS5ub3coKS5pc29mb3JtYXQoKQogICAgc3Quc2Vzc2lvbl9zdGF0ZS5jdXJyZW50X3F1aXpfc2F2ZWRfY291bnQgPSAwCiAgICBzdC5zZXNzaW9uX3N0YXRlLnJlc3VsdHNfc2F2ZWQgPSBGYWxzZQogICAgaWYgJ2Fuc3dlcl9vcHRpb25zJyBpbiBzdC5zZXNzaW9uX3N0YXRlOgogICAgICAgIGRlbCBzdC5zZXNzaW9uX3N0YXRlLmFuc3dlcl9vcHRpb25zCgoKIyBkZWYgcmVuZGVyX3F1aXpfZ2FtZXBsYXkoKToKICAgICMgIiIiSGFuZGxlcyB0aGUgcmVuZGVyaW5nIG9mIHRoZSBhY3RpdmUgcXVpeiBxdWVzdGlvbi4iIiIKICAgICMgaWYgc3Quc2Vzc2lvbl9zdGF0ZS5jdXJyZW50X3FfaW5kZXggPj0gbGVuKHN0LnNlc3Npb25fc3RhdGUucXVlc3Rpb25zKToKICAgICMgICAgIHNob3dfcXVpel9jb21wbGV0aW9uKCkKICAgICMgICAgIHJldHVybgoKICAgICMgcWEgPSBzdC5zZXNzaW9uX3N0YXRlLnF1ZXN0aW9uc1tzdC5zZXNzaW9uX3N0YXRlLmN1cnJlbnRfcV9pbmRleF0KCiAgICAjIGlmICdhbnN3ZXJfb3B0aW9ucycgbm90IGluIHN0LnNlc3Npb25fc3RhdGU6CiAgICAjICAgICBvcHRpb25zID0gcWEuZ2V0KCdvcHRpb25zJywgW10pLmNvcHkoKQogICAgIyAgICAgcmFuZG9tLnNodWZmbGUob3B0aW9ucykKICAgICMgICAgIHN0LnNlc3Npb25fc3RhdGUuYW5zd2VyX29wdGlvbnMgPSBvcHRpb25zCgogICAgIyBzdC5wcm9ncmVzcygoc3Quc2Vzc2lvbl9zdGF0ZS5jdXJyZW50X3FfaW5kZXggKyAxKSAvIGxlbihzdC5zZXNzaW9uX3N0YXRlLnF1ZXN0aW9ucykpCiAgICAjIHN0LndyaXRlKGYiIyMjIFF1ZXN0aW9uIHtzdC5zZXNzaW9uX3N0YXRlLmN1cnJlbnRfcV9pbmRleCArIDF9L3tsZW4oc3Quc2Vzc2lvbl9zdGF0ZS5xdWVzdGlvbnMpfSIpCiAgICAjIHN0LndyaXRlKGYi8J+TnCAqKntxYVsncXVlc3Rpb24nXX0qKiIpCgogICAgIyB3aXRoIHN0LmZvcm0oa2V5PWYicV97c3Quc2Vzc2lvbl9zdGF0ZS5jdXJyZW50X3FfaW5kZXh9Iik6CiAgICAjICAgICB1c2VyX2Nob2ljZSA9IHN0LnJhZGlvKCJDaG9vc2UgeW91ciBhbnN3ZXI6Iiwgc3Quc2Vzc2lvbl9zdGF0ZS5hbnN3ZXJfb3B0aW9ucywgaW5kZXg9Tm9uZSkKICAgICMgICAgIHN1Ym1pdF9idXR0b24gPSBzdC5mb3JtX3N1Ym1pdF9idXR0b24oIlN1Ym1pdCBBbnN3ZXIiKQoKICAgICMgICAgIGlmIHN1Ym1pdF9idXR0b24gYW5kIHVzZXJfY2hvaWNlOgogICAgIyAgICAgICAgIHN0LnNlc3Npb25fc3RhdGUuc3VibWl0dGVkID0gVHJ1ZQogICAgIyAgICAgICAgIGlmIHVzZXJfY2hvaWNlID09IHFhWydjb3JyZWN0X2Fuc3dlciddOgogICAgIyAgICAgICAgICAgICBzdC5zZXNzaW9uX3N0YXRlLnNjb3JlICs9IDEKICAgICMgICAgICAgICAgICAgc3Quc3VjY2Vzcygi4pyFIENvcnJlY3QhIikKICAgICMgICAgICAgICBlbHNlOgogICAgIyAgICAgICAgICAgICBzdC5lcnJvcihmIuKdjCBJbmNvcnJlY3QhIENvcnJlY3QgYW5zd2VyOiAqKntxYVsnY29ycmVjdF9hbnN3ZXInXX0qKiIpCgogICAgIyBpZiBzdC5zZXNzaW9uX3N0YXRlLnN1Ym1pdHRlZDoKICAgICMgICAgIGNvbDEsIGNvbDIgPSBzdC5jb2x1bW5zKFswLjcsIDAuM10pCiAgICAjICAgICBpZiBjb2wxLmJ1dHRvbigiTmV4dCBRdWVzdGlvbiDinqHvuI8iLCB1c2VfY29udGFpbmVyX3dpZHRoPVRydWUpOgogICAgIyAgICAgICAgIHN0LnNlc3Npb25fc3RhdGUuY3VycmVudF9xX2luZGV4ICs9IDEKICAgICMgICAgICAgICBzdC5zZXNzaW9uX3N0YXRlLnN1Ym1pdHRlZCA9IEZhbHNlCiAgICAjICAgICAgICAgaWYgJ2Fuc3dlcl9vcHRpb25zJyBpbiBzdC5zZXNzaW9uX3N0YXRlOiBkZWwgc3Quc2Vzc2lvbl9zdGF0ZS5hbnN3ZXJfb3B0aW9ucwogICAgIyAgICAgICAgIHN0LnJlcnVuKCkKICAgICMgICAgIGlmIGNvbDIuYnV0dG9uKCLwn5K+IFNhdmUgZm9yIFJldmlzaW9uIiwgdXNlX2NvbnRhaW5lcl93aWR0aD1UcnVlKToKICAgICMgICAgICAgICBzYXZlX3F1ZXN0aW9uX2Zvcl9yZXZpc2lvbihzdC5zZXNzaW9uX3N0YXRlLmN1cnJlbnRfY2F0ZWdvcnksIHN0LnNlc3Npb25fc3RhdGUuY3VycmVudF90b3BpYywgcWEpCgpkZWYgcmVuZGVyX3F1aXpfZ2FtZXBsYXkoKToKICAgICIiIkhhbmRsZXMgdGhlIHJlbmRlcmluZyBvZiB0aGUgYWN0aXZlIHF1aXogcXVlc3Rpb24gd2l0aCBhIHRpbWVyLiIiIgogICAgaWYgc3Quc2Vzc2lvbl9zdGF0ZS5jdXJyZW50X3FfaW5kZXggPj0gbGVuKHN0LnNlc3Npb25fc3RhdGUucXVlc3Rpb25zKToKICAgICAgICBzaG93X3F1aXpfY29tcGxldGlvbigpCiAgICAgICAgcmV0dXJuCgogICAgIyAtLS0gVGltZXIgYW5kIFByb2dyZXNzIEJhciAtLS0KICAgIHN0YXJ0X3RpbWUgPSBkYXRldGltZS5mcm9taXNvZm9ybWF0KHN0LnNlc3Npb25fc3RhdGUucXVpel9zdGFydF90aW1lKQogICAgZWxhcHNlZF90aW1lID0gZGF0ZXRpbWUubm93KCkgLSBzdGFydF90aW1lCiAgICB0b3RhbF9zZWNvbmRzID0gaW50KGVsYXBzZWRfdGltZS50b3RhbF9zZWNvbmRzKCkpCiAgICBob3VycywgcmVtYWluZGVyID0gZGl2bW9kKHRvdGFsX3NlY29uZHMsIDM2MDApCiAgICBtaW51dGVzLCBzZWNvbmRzID0gZGl2bW9kKHJlbWFpbmRlciwgNjApCiAgICB0aW1lX3N0ciA9IGYie2hvdXJzOjAyfTp7bWludXRlczowMn06e3NlY29uZHM6MDJ9IgogICAgCiAgICBwcm9ncmVzc192YWwgPSAoc3Quc2Vzc2lvbl9zdGF0ZS5jdXJyZW50X3FfaW5kZXgpIC8gbGVuKHN0LnNlc3Npb25fc3RhdGUucXVlc3Rpb25zKQogICAgCiAgICAjIENyZWF0ZSBhIGNsZWFuIGxheW91dCBmb3IgcHJvZ3Jlc3MgYW5kIHRpbWVyCiAgICBjb2wxLCBjb2wyID0gc3QuY29sdW1ucyhbMywgMV0pCiAgICB3aXRoIGNvbDE6CiAgICAgICAgc3QucHJvZ3Jlc3MocHJvZ3Jlc3NfdmFsLCB0ZXh0PWYiUXVlc3Rpb24ge3N0LnNlc3Npb25fc3RhdGUuY3VycmVudF9xX2luZGV4ICsgMX0ve2xlbihzdC5zZXNzaW9uX3N0YXRlLnF1ZXN0aW9ucyl9IikKICAgIHdpdGggY29sMjoKICAgICAgICBzdC5tYXJrZG93bihmIjxkaXYgc3R5bGU9J3RleHQtYWxpZ246IHJpZ2h0Oyc+4o+zIDxiPnt0aW1lX3N0cn08L2I+PC9kaXY+IiwgdW5zYWZlX2FsbG93X2h0bWw9VHJ1ZSkKICAgIAogICAgc3QubWFya2Rvd24oIi0tLSIpICMgU2VwYXJhdG9yCgogICAgIyAtLS0gUXVlc3Rpb24gRGlzcGxheSAtLS0KICAgIHFhID0gc3Quc2Vzc2lvbl9zdGF0ZS5xdWVzdGlvbnNbc3Quc2Vzc2lvbl9zdGF0ZS5jdXJyZW50X3FfaW5kZXhdCgogICAgaWYgJ2Fuc3dlcl9vcHRpb25zJyBub3QgaW4gc3Quc2Vzc2lvbl9zdGF0ZToKICAgICAgICBvcHRpb25zID0gcWEuZ2V0KCdvcHRpb25zJywgW10pLmNvcHkoKQogICAgICAgIHJhbmRvbS5zaHVmZmxlKG9wdGlvbnMpCiAgICAgICAgc3Quc2Vzc2lvbl9zdGF0ZS5hbnN3ZXJfb3B0aW9ucyA9IG9wdGlvbnMKCiAgICBzdC53cml0ZShmIiMjIyDwn5OcICoqe3FhWydxdWVzdGlvbiddfSoqIikKCiAgICAjIC0tLSBBbnN3ZXIgRm9ybSAtLS0KICAgIHdpdGggc3QuZm9ybShrZXk9ZiJxX3tzdC5zZXNzaW9uX3N0YXRlLmN1cnJlbnRfcV9pbmRleH0iKToKICAgICAgICB1c2VyX2Nob2ljZSA9IHN0LnJhZGlvKCJDaG9vc2UgeW91ciBhbnN3ZXI6Iiwgc3Quc2Vzc2lvbl9zdGF0ZS5hbnN3ZXJfb3B0aW9ucywgaW5kZXg9Tm9uZSwgbGFiZWxfdmlzaWJpbGl0eT0iY29sbGFwc2VkIikKICAgICAgICBzdWJtaXRfYnV0dG9uID0gc3QuZm9ybV9zdWJtaXRfYnV0dG9uKCJTdWJtaXQgQW5zd2VyIikKCiAgICAgICAgaWYgc3VibWl0X2J1dHRvbiBhbmQgdXNlcl9jaG9pY2U6CiAgICAgICAgICAgIHN0LnNlc3Npb25fc3RhdGUuc3VibWl0dGVkID0gVHJ1ZQogICAgICAgICAgICBpZiB1c2VyX2Nob2ljZSA9PSBxYVsnY29ycmVjdF9hbnN3ZXInXToKICAgICAgICAgICAgICAgIHN0LnNlc3Npb25fc3RhdGUuc2NvcmUgKz0gMQogICAgICAgICAgICAgICAgc3Quc3VjY2Vzcygi4pyFIENvcnJlY3QhIikKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHN0LmVycm9yKGYi4p2MIEluY29ycmVjdCEgQ29ycmVjdCBhbnN3ZXI6ICoqe3FhWydjb3JyZWN0X2Fuc3dlciddfSoqIikKCiAgICAjIC0tLSBOYXZpZ2F0aW9uIGFmdGVyIFN1Ym1pc3Npb24gLS0tCiAgICBpZiBzdC5zZXNzaW9uX3N0YXRlLnN1Ym1pdHRlZDoKICAgICAgICBjb2wxLCBjb2wyID0gc3QuY29sdW1ucyhbMC43LCAwLjNdKQogICAgICAgIGlmIGNvbDEuYnV0dG9uKCJOZXh0IFF1ZXN0aW9uIOKeoe+4jyIsIHVzZV9jb250YWluZXJfd2lkdGg9VHJ1ZSk6CiAgICAgICAgICAgIHN0LnNlc3Npb25fc3RhdGUuY3VycmVudF9xX2luZGV4ICs9IDEKICAgICAgICAgICAgc3Quc2Vzc2lvbl9zdGF0ZS5zdWJtaXR0ZWQgPSBGYWxzZQogICAgICAgICAgICBpZiAnYW5zd2VyX29wdGlvbnMnIGluIHN0LnNlc3Npb25fc3RhdGU6IGRlbCBzdC5zZXNzaW9uX3N0YXRlLmFuc3dlcl9vcHRpb25zCiAgICAgICAgICAgICMgQSBzbWFsbCBkZWxheSBjYW4gaW1wcm92ZSB0aGUgZmVlbCBvZiB0aGUgYXBwLCBwcmV2ZW50aW5nIGFjY2lkZW50YWwgZG91YmxlLWNsaWNrcwogICAgICAgICAgICB0aW1lLnNsZWVwKDAuMSkgCiAgICAgICAgICAgIHN0LnJlcnVuKCkKICAgICAgICBpZiBjb2wyLmJ1dHRvbigi8J+SviBTYXZlIGZvciBSZXZpc2lvbiIsIHVzZV9jb250YWluZXJfd2lkdGg9VHJ1ZSk6CiAgICAgICAgICAgIHNhdmVfcXVlc3Rpb25fZm9yX3JldmlzaW9uKHN0LnNlc3Npb25fc3RhdGUuY3VycmVudF9jYXRlZ29yeSwgc3Quc2Vzc2lvbl9zdGF0ZS5jdXJyZW50X3RvcGljLCBxYSkKCmRlZiBzaG93X3F1aXpfY29tcGxldGlvbigpOgogICAgIiIiRGlzcGxheXMgdGhlIGZpbmFsIHNjb3JlIGFuZCBzYXZlcyB0aGUgcmVjb3JkLiIiIgogICAgc3Quc3VjY2Vzcygi8J+OiSAqKlF1aXogQ29tcGxldGUhKiog8J+OiSIpCiAgICBzdC5iYWxsb29ucygpCiAgICBzY29yZSA9IHN0LnNlc3Npb25fc3RhdGUuc2NvcmUKICAgIHRvdGFsID0gbGVuKHN0LnNlc3Npb25fc3RhdGUucXVlc3Rpb25zKQogICAgc3QubWFya2Rvd24oZiIjIyMgWW91ciBGaW5hbCBTY29yZTogKip7c2NvcmV9IC8ge3RvdGFsfSoqIikKICAgIAogICAgaWYgc3Quc2Vzc2lvbl9zdGF0ZS5nZXQoInF1aXpfc291cmNlIikgPT0gImZpbGUiIGFuZCBub3Qgc3Quc2Vzc2lvbl9zdGF0ZS5nZXQoInJlc3VsdHNfc2F2ZWQiLCBGYWxzZSk6CiAgICAgc3RhcnRfdGltZSA9IGRhdGV0aW1lLmZyb21pc29mb3JtYXQoc3Quc2Vzc2lvbl9zdGF0ZS5xdWl6X3N0YXJ0X3RpbWUpCiAgICAgZW5kX3RpbWUgPSBkYXRldGltZS5ub3coKQogICAgIHRpbWVfdGFrZW4gPSBzdHIoZW5kX3RpbWUgLSBzdGFydF90aW1lKS5zcGxpdCgnLicpWzBdCgogICAgIHJlY29yZCA9IHsKICAgICAgICAicXVpel9uYW1lIjogZiJ7c3Quc2Vzc2lvbl9zdGF0ZS5jdXJyZW50X2NhdGVnb3J5fSAtIHtzdC5zZXNzaW9uX3N0YXRlLmN1cnJlbnRfdG9waWN9IiwKICAgICAgICAidG9waWMiOiBzdC5zZXNzaW9uX3N0YXRlLmN1cnJlbnRfdG9waWMsCiAgICAgICAgImRhdGUiOiBlbmRfdGltZS5zdHJmdGltZSgiJVktJW0tJWQgJUg6JU06JVMiKSwKICAgICAgICAidGltZV90YWtlbiI6IHRpbWVfdGFrZW4sCiAgICAgICAgImNvcnJlY3QiOiBzY29yZSwKICAgICAgICAiaW5jb3JyZWN0IjogdG90YWwgLSBzY29yZSwKICAgICAgICAiYWNjdXJhY3kiOiBmIntzY29yZSAvIHRvdGFsICogMTAwOi4yZn0lIiwKICAgICAgICAic2F2ZWRfcXVlc3Rpb25zIjogc3Quc2Vzc2lvbl9zdGF0ZS5jdXJyZW50X3F1aXpfc2F2ZWRfY291bnQKICAgICB9CiAgICAgYWRkX3F1aXpfcmVjb3JkX3RvX2hpc3RvcnkocmVjb3JkKQogICAgIHN0LnNlc3Npb25fc3RhdGUucmVzdWx0c19zYXZlZCA9IFRydWUgIyBTZXQgdGhlIGZsYWcgdG8gcHJldmVudCByZS1zYXZpbmcKCiAgICBpZiBzdC5idXR0b24oIkJhY2sgdG8gTWFpbiBQYWdlIik6CiAgICAgICAgc3Quc2Vzc2lvbl9zdGF0ZS5xdWl6X3N0YXJ0ZWQgPSBGYWxzZQogICAgICAgIGtleXNfdG9fY2xlYXIgPSBbJ3F1ZXN0aW9ucycsICdzY29yZScsICdjdXJyZW50X3FfaW5kZXgnLCAnc3VibWl0dGVkJywgJ2N1cnJlbnRfY2F0ZWdvcnknLCAnY3VycmVudF90b3BpYycsICdxdWl6X3NvdXJjZScsICdxdWl6X3N0YXJ0X3RpbWUnLCAnY3VycmVudF9xdWl6X3NhdmVkX2NvdW50JywgJ3Jlc3VsdHNfc2F2ZWQnXQogICAgICAgIGZvciBrZXkgaW4ga2V5c190b19jbGVhcjoKICAgICAgICAgICAgaWYga2V5IGluIHN0LnNlc3Npb25fc3RhdGU6IGRlbCBzdC5zZXNzaW9uX3N0YXRlW2tleV0KICAgICAgICBzdC5yZXJ1bigpCgpkZWYgc2hvd19yZXZpc2lvbl9wYWdlKCk6CiAgICAiIiJSZW5kZXJzIHRoZSBwYWdlIGZvciByZXZpZXdpbmcsIHJlbW92aW5nLCBhbmQgc3RhcnRpbmcgYSBxdWl6IGZyb20gc2F2ZWQgcXVlc3Rpb25zLiIiIgogICAgc3QudGl0bGUoIvCfk5ogUmV2aXNpb24gSHViIikKICAgIHN0LndyaXRlKCJSZXZpZXcgc2F2ZWQgcXVlc3Rpb25zIG9yIHN0YXJ0IGEgcXVpeiBmcm9tIHlvdXIgcmV2aXNpb24gbGlzdC4iKQoKICAgIHNhdmVkX2RhdGEgPSBzdC5zZXNzaW9uX3N0YXRlLmdldCgic2F2ZWRfcXVlc3Rpb25zIiwge30pCiAgICBpZiBub3Qgc2F2ZWRfZGF0YToKICAgICAgICBzdC5pbmZvKCJZb3UgaGF2ZW4ndCBzYXZlZCBhbnkgcXVlc3Rpb25zIHlldC4gR28gdG8gdGhlIFF1aXogcGFnZSB0byBzYXZlIHNvbWUhIikKICAgICAgICByZXR1cm4KCiAgICAjIC0tLSBDcmVhdGUgYSBzaW5nbGUgZmxhdCBsaXN0IG9mIGFsbCBxdWVzdGlvbnMsIGVhY2ggd2l0aCBpdHMgY2F0ZWdvcnkgYW5kIHRvcGljIGNvbnRleHQgLS0tCiAgICBhbGxfcXVlc3Rpb25zX3dpdGhfY29udGV4dCA9IFtdCiAgICBmb3IgY2F0LCB0b3BpY3MgaW4gc2F2ZWRfZGF0YS5pdGVtcygpOgogICAgICAgIGZvciB0b3BpYywgcXMgaW4gdG9waWNzLml0ZW1zKCk6CiAgICAgICAgICAgIGZvciBxIGluIHFzOgogICAgICAgICAgICAgICAgcV9jb3B5ID0gcS5jb3B5KCkKICAgICAgICAgICAgICAgIHFfY29weVsnY2F0ZWdvcnknXSA9IGNhdAogICAgICAgICAgICAgICAgcV9jb3B5Wyd0b3BpYyddID0gdG9waWMKICAgICAgICAgICAgICAgIGFsbF9xdWVzdGlvbnNfd2l0aF9jb250ZXh0LmFwcGVuZChxX2NvcHkpCgogICAgcXVlc3Rpb25zX3RvX2Rpc3BsYXkgPSBhbGxfcXVlc3Rpb25zX3dpdGhfY29udGV4dAogICAgCiAgICBzdC5tYXJrZG93bigiLS0tIikKCiAgICAjIC0tLSBTdGFydCBRdWl6IGZyb20gU2F2ZWQgLS0tCiAgICBzdC5zdWJoZWFkZXIoZiJTdGFydCBhIFF1aXogZnJvbSB7bGVuKHF1ZXN0aW9uc190b19kaXNwbGF5KX0gU2F2ZWQgUXVlc3Rpb25zIikKICAgIGlmIG5vdCBxdWVzdGlvbnNfdG9fZGlzcGxheToKICAgICAgICBzdC53YXJuaW5nKCJObyBxdWVzdGlvbnMgc2F2ZWQgdG8gc3RhcnQgYSByZXZpc2lvbiBxdWl6LiIpCiAgICBlbGlmIHN0LmJ1dHRvbigiU3RhcnQgUmV2aXNpb24gUXVpeiEiLCB1c2VfY29udGFpbmVyX3dpZHRoPVRydWUpOgogICAgICAgIHJlc2V0X3F1aXpfc3RhdGUocXVlc3Rpb25zX3RvX2Rpc3BsYXksIDEsIGxlbihxdWVzdGlvbnNfdG9fZGlzcGxheSksICJSZXZpc2lvbiIsICJTYXZlZCBRdWVzdGlvbnMiLCBzb3VyY2U9InJldmlzaW9uIikKICAgICAgICBzdC5zZXNzaW9uX3N0YXRlLnF1aXpfc3RhcnRlZCA9IFRydWUKICAgICAgICBzdC5yZXJ1bigpCgogICAgc3QubWFya2Rvd24oIi0tLSIpCiAgICAKICAgICMgLS0tIERpc3BsYXkgU2F2ZWQgUXVlc3Rpb25zIHdpdGggUmVtb3ZlIE9wdGlvbiAtLS0KICAgIHN0LnN1YmhlYWRlcigiRXhwbG9yZSBTYXZlZCBRdWVzdGlvbnMiKQogICAgaWYgbm90IHF1ZXN0aW9uc190b19kaXNwbGF5OgogICAgICAgIHN0LmluZm8oIllvdXIgcmV2aXNpb24gaHViIGlzIGVtcHR5LiIpCiAgICAgICAgcmV0dXJuCgogICAgZm9yIGksIHFhIGluIGVudW1lcmF0ZShxdWVzdGlvbnNfdG9fZGlzcGxheSk6CiAgICAgICAgIyBxYSBub3cgY29udGFpbnMgJ2NhdGVnb3J5JyBhbmQgJ3RvcGljJwogICAgICAgIGV4cGFuZGVyX3RpdGxlID0gZiIqKntxYS5nZXQoJ2NhdGVnb3J5JywgJ04vQScpfSB8IHtxYS5nZXQoJ3RvcGljJywgJ04vQScpfSoqOiB7cWFbJ3F1ZXN0aW9uJ119IgogICAgICAgIHdpdGggc3QuZXhwYW5kZXIoZXhwYW5kZXJfdGl0bGUpOgogICAgICAgICAgICBzdC5zdWNjZXNzKGYiKipDb3JyZWN0IEFuc3dlcjoqKiB7cWFbJ2NvcnJlY3RfYW5zd2VyJ119IikKCiAgICAgICAgICAgICMgQWRkIGEgcmVtb3ZlIGJ1dHRvbiBpbiB0aGUgY29ybmVyCiAgICAgICAgICAgIGlmIHN0LmJ1dHRvbigi8J+Xke+4jyBSZW1vdmUgdGhpcyBxdWVzdGlvbiIsIGtleT1mInJlbW92ZV97cWFbJ2NhdGVnb3J5J119X3txYVsndG9waWMnXX1fe2l9IiwgdXNlX2NvbnRhaW5lcl93aWR0aD1UcnVlKToKICAgICAgICAgICAgICAgIHJlbW92ZV9zYXZlZF9xdWVzdGlvbihxYVsnY2F0ZWdvcnknXSwgcWFbJ3RvcGljJ10sIHFhKQogICAgICAgICAgICAgICAgIyBUaGUgcmVtb3ZlX3NhdmVkX3F1ZXN0aW9uIGZ1bmN0aW9uIGFscmVhZHkgY2FsbHMgc3QucmVydW4oKQoKZGVmIHNob3dfc3RhdGlzdGljc19wYWdlKCk6CiAgICAiIiJSZW5kZXJzIHRoZSBhZHZhbmNlZCBzdGF0aXN0aWNzIHBhZ2Ugd2l0aCBncmFwaHMgYW5kIGEgZGV0YWlsZWQgdGFibGUuIiIiCiAgICBzdC50aXRsZSgi8J+TiiBZb3VyIFBlcmZvcm1hbmNlIFN0YXRpc3RpY3MiKQogICAgaGlzdG9yeSA9IHN0LnNlc3Npb25fc3RhdGUuZ2V0KCJxdWl6X2hpc3RvcnkiLCBbXSkKCiAgICBpZiBub3QgaGlzdG9yeToKICAgICAgICBzdC5pbmZvKCJObyBxdWl6IGhpc3RvcnkgZm91bmQuIENvbXBsZXRlIGEgcXVpeiB0byBzZWUgeW91ciBzdGF0cyBoZXJlISIpCiAgICAgICAgcmV0dXJuCgogICAgZGYgPSBwZC5EYXRhRnJhbWUoaGlzdG9yeSkKICAgIGRmWydkYXRlJ10gPSBwZC50b19kYXRldGltZShkZlsnZGF0ZSddKQogICAgZGZbJ2FjY3VyYWN5X3ZhbCddID0gZGZbJ2FjY3VyYWN5J10uc3RyLnJlcGxhY2UoJyUnLCAnJykuYXN0eXBlKGZsb2F0KQoKICAgICMgLS0tIE92ZXJhbGwgTWV0cmljcyAtLS0KICAgIHRvdGFsX3F1aXp6ZXMgPSBsZW4oZGYpCiAgICB0b3RhbF9jb3JyZWN0ID0gZGZbJ2NvcnJlY3QnXS5zdW0oKQogICAgdG90YWxfaW5jb3JyZWN0ID0gZGZbJ2luY29ycmVjdCddLnN1bSgpCiAgICBvdmVyYWxsX2FjY3VyYWN5ID0gKHRvdGFsX2NvcnJlY3QgLyAodG90YWxfY29ycmVjdCArIHRvdGFsX2luY29ycmVjdCkgKiAxMDApIGlmICh0b3RhbF9jb3JyZWN0ICsgdG90YWxfaW5jb3JyZWN0KSA+IDAgZWxzZSAwCgogICAgY29sMSwgY29sMiwgY29sMyA9IHN0LmNvbHVtbnMoMykKICAgIGNvbDEubWV0cmljKCJUb3RhbCBRdWl6emVzIFRha2VuIiwgdG90YWxfcXVpenplcykKICAgIGNvbDIubWV0cmljKCJUb3RhbCBDb3JyZWN0IEFuc3dlcnMiLCBmInt0b3RhbF9jb3JyZWN0fSIpCiAgICBjb2wzLm1ldHJpYygiT3ZlcmFsbCBBY2N1cmFjeSIsIGYie292ZXJhbGxfYWNjdXJhY3k6LjJmfSUiKQogICAgc3QubWFya2Rvd24oIi0tLSIpCgogICAgIyAtLS0gVG9waWMtd2lzZSBQZXJmb3JtYW5jZSBDaGFydCAtLS0KICAgIHN0LnN1YmhlYWRlcigiUGVyZm9ybWFuY2UgYnkgVG9waWMiKQogICAgdG9waWNfc3RhdHMgPSBkZi5ncm91cGJ5KCd0b3BpYycpWydhY2N1cmFjeV92YWwnXS5tZWFuKCkucmVzZXRfaW5kZXgoKQogICAgZmlnX2JhciA9IHB4LmJhcih0b3BpY19zdGF0cywgeD0ndG9waWMnLCB5PSdhY2N1cmFjeV92YWwnLCB0aXRsZT0iQXZlcmFnZSBBY2N1cmFjeSBwZXIgVG9waWMiLAogICAgICAgICAgICAgICAgICAgICBsYWJlbHM9eyd0b3BpYyc6ICdRdWl6IFRvcGljJywgJ2FjY3VyYWN5X3ZhbCc6ICdBdmVyYWdlIEFjY3VyYWN5ICglKSd9LAogICAgICAgICAgICAgICAgICAgICBjb2xvcj0ndG9waWMnLCBoZWlnaHQ9NDAwKQogICAgc3QucGxvdGx5X2NoYXJ0KGZpZ19iYXIsIHVzZV9jb250YWluZXJfd2lkdGg9VHJ1ZSkKCiAgICAjIC0tLSBBY2N1cmFjeSBPdmVyIFRpbWUgQ2hhcnQgLS0tCiAgICBzdC5zdWJoZWFkZXIoIkFjY3VyYWN5IFRyZW5kIE92ZXIgVGltZSIpCiAgICBmaWdfbGluZSA9IHB4LmxpbmUoZGYuc29ydF92YWx1ZXMoJ2RhdGUnKSwgeD0nZGF0ZScsIHk9J2FjY3VyYWN5X3ZhbCcsIHRpdGxlPSJBY2N1cmFjeSBPdmVyIFRpbWUiLAogICAgICAgICAgICAgICAgICAgICAgIGxhYmVscz17J2RhdGUnOiAnRGF0ZScsICdhY2N1cmFjeV92YWwnOiAnQWNjdXJhY3kgKCUpJ30sIG1hcmtlcnM9VHJ1ZSwgaGVpZ2h0PTQwMCkKICAgIHN0LnBsb3RseV9jaGFydChmaWdfbGluZSwgdXNlX2NvbnRhaW5lcl93aWR0aD1UcnVlKQoKICAgICMgLS0tIERldGFpbGVkIFF1aXogSGlzdG9yeSBUYWJsZSAtLS0KICAgIHN0Lm1hcmtkb3duKCItLS0iKQogICAgc3Quc3ViaGVhZGVyKCJEZXRhaWxlZCBRdWl6IEhpc3RvcnkiKQogICAgc3QuZGF0YWZyYW1lKGRmW1sncXVpel9uYW1lJywgJ2RhdGUnLCAndGltZV90YWtlbicsICdjb3JyZWN0JywgJ2luY29ycmVjdCcsICdhY2N1cmFjeScsICdzYXZlZF9xdWVzdGlvbnMnXV0uc29ydF92YWx1ZXMoJ2RhdGUnLCBhc2NlbmRpbmc9RmFsc2UpLCB1c2VfY29udGFpbmVyX3dpZHRoPVRydWUpCgogICAgaWYgc3QuYnV0dG9uKCJSZXNldCBBbGwgSGlzdG9yeSIsIHR5cGU9InByaW1hcnkiKToKICAgICAgICBzdC5zZXNzaW9uX3N0YXRlLnF1aXpfaGlzdG9yeSA9IFtdCiAgICAgICAgc2F2ZV9qc29uKFtdLCBISVNUT1JZX0ZJTEUpCiAgICAgICAgc3QudG9hc3QoIkFsbCBxdWl6IGhpc3RvcnkgaGFzIGJlZW4gcmVzZXQhIiwgaWNvbj0i8J+Xke+4jyIpCiAgICAgICAgc3QucmVydW4oKQoKIyAtLS0gTWFpbiBBcHAgUm91dGVyIC0tLQpkZWYgbWFpbigpOgogICAgIiIiTWFpbiBmdW5jdGlvbiB0byBydW4gdGhlIFN0cmVhbWxpdCBhcHAuIiIiCiAgICBpbml0aWFsaXplX3Nlc3Npb25fc3RhdGUoKQogICAgYmVhdXRpZnVsX3NpZGViYXIoKQogICAgCiAgICBwYWdlID0gc3Quc2Vzc2lvbl9zdGF0ZS5nZXQoInBhZ2UiLCAiUXVpeiIpCiAgICBpc19xdWl6X2FjdGl2ZSA9IHN0LnNlc3Npb25fc3RhdGUuZ2V0KCJxdWl6X3N0YXJ0ZWQiLCBGYWxzZSkKCiAgICBpZiBpc19xdWl6X2FjdGl2ZToKICAgICAgICByZW5kZXJfcXVpel9nYW1lcGxheSgpCiAgICBlbGlmIHBhZ2UgPT0gIlF1aXoiOgogICAgICAgIHNob3dfcXVpel9wYWdlKCkKICAgIGVsaWYgcGFnZSA9PSAiUmV2aXNpb24iOgogICAgICAgIHNob3dfcmV2aXNpb25fcGFnZSgpCiAgICBlbGlmIHBhZ2UgPT0gIlN0YXRpc3RpY3MiOgogICAgICAgIHNob3dfc3RhdGlzdGljc19wYWdlKCkKCmlmIF9fbmFtZV9fID09ICJfX21haW5fXyI6CiAgICBtYWluKCkK</text>
      </register>
      <register name="2" type="LINE_WISE">
        <text encoding="base64">ICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczIgPSB7ICd4LWFjY2Vzcy10b2tlbic6IGNsYXNzcGx1c190b2tlbn0K</text>
      </register>
      <register name="3" type="LINE_WISE">
        <text encoding="base64">ICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczIgPSB7ICd4LWFjY2Vzcy10b2tlbic6IGNsYXNzcGx1c190b2tlbn0K</text>
      </register>
      <register name="4" type="LINE_WISE">
        <text encoding="base64">ICAgICAgICAgICAgaGFzaF9oZWFkZXJzID0gewogICAgICAgICAgICAgICAKICAgICAgICAgICAgfQo=</text>
      </register>
      <register name="5" type="CHARACTER_WISE">
        <text encoding="base64">ICdBY2NlcHQnOiAndGV4dC9odG1sLGFwcGxpY2F0aW9uL3hodG1sK3htbCxhcHBsaWNhdGlvbi94bWw7cT0wLjksaW1hZ2UvYXZpZixpbWFnZS93ZWJwLGltYWdlL2FwbmcsKi8qO3E9MC44LGFwcGxpY2F0aW9uL3NpZ25lZC1leGNoYW5nZTt2PWIzO3E9MC43JywKICAgICAgICAgICAgICAgICdBY2NlcHQtRW5jb2RpbmcnOiAnZ3ppcCwgZGVmbGF0ZSwgYnIsIHpzdGQnLAogICAgICAgICAgICAgICAgJ0FjY2VwdC1MYW5ndWFnZSc6ICdlbi1VUyxlbjtxPTAuOScsCiAgICAgICAgICAgICAgICAnU2VjLUNILVVBJzogJyJDaHJvbWl1bSI7dj0iMTI4IiwgIk5vdDtBPUJyYW5kIjt2PSIyNCIsICJHb29nbGUgQ2hyb21lIjt2PSIxMjgiJywKICAgICAgICAgICAgICAgICdTZWMtQ0gtVUEtTW9iaWxlJzogJz8wJywKICAgICAgICAgICAgICAgICdTZWMtQ0gtVUEtUGxhdGZvcm0nOiAnIldpbmRvd3MiJywKICAgICAgICAgICAgICAgICdTZWMtRmV0Y2gtRGVzdCc6ICdkb2N1bWVudCcsCiAgICAgICAgICAgICAgICAnU2VjLUZldGNoLU1vZGUnOiAnbmF2aWdhdGUnLAogICAgICAgICAgICAgICAgJ1NlYy1GZXRjaC1TaXRlJzogJ3NhbWUtb3JpZ2luJywKICAgICAgICAgICAgICAgICdTZWMtRmV0Y2gtVXNlcic6ICc/MScsCiAgICAgICAgICAgICAgICAnVXBncmFkZS1JbnNlY3VyZS1SZXF1ZXN0cyc6ICcxJywKICAgICAgICAgICAgICAgICdVc2VyLUFnZW50JzogJ01vemlsbGEvNS4wIChXaW5kb3dzIE5UIDEwLjA7IFdpbjY0OyB4NjQpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIENocm9tZS8xMjguMC4wLjAgU2FmYXJpLzUzNy4zNic=</text>
      </register>
      <register name="6" type="LINE_WISE">
        <text encoding="base64">Cg==</text>
      </register>
      <register name="7" type="LINE_WISE">
        <text encoding="base64">ICAgICAgICAgICAgICAgICdSZWZlcmVyJzogJ2h0dHBzOi8vcXN2Zm4uY291cnNlcy5zdG9yZS8/bWFpbkNhdGVnb3J5PTAmc3ViQ2F0TGlzdD1bMTMwNTA0LDYyNDQyXScsCg==</text>
      </register>
      <register name="8" type="LINE_WISE">
        <text encoding="base64">ICAgICAgICAgICAgICAgICdSZWZlcmVyJzogJ2h0dHBzOi8vcXN2Zm4uY291cnNlcy5zdG9yZS8/bWFpbkNhdGVnb3J5PTAmc3ViQ2F0TGlzdD1bMTMwNTA0LDYyNDQyXScsCg==</text>
      </register>
      <register name="9" type="LINE_WISE">
        <text encoding="base64">Cg==</text>
      </register>
      <register name=":" type="CHARACTER_WISE">
        <text encoding="base64">dw==</text>
      </register>
    </registers>
  </component>
  <component name="VimSearchSettings">
    <search>
      <last-offset encoding="base64" />
      <last-dir encoding="base64">MQ==</last-dir>
      <show-last encoding="base64">ZmFsc2U=</show-last>
    </search>
  </component>
  <component name="VimVariables">
    <vim-variables />
  </component>
</application>